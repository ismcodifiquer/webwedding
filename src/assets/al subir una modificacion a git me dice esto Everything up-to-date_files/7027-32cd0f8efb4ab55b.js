!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},l=Error().stack;l&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[l]="95a86e22-c7d2-4127-b4fc-0a27519b4e3a",e._sentryDebugIdIdentifier="sentry-dbid-95a86e22-c7d2-4127-b4fc-0a27519b4e3a")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7027],{57632:function(e,l){l.DF={prefix:"fab",iconName:"facebook",icon:[512,512,[62e3],"f09a","M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"]},l.ne=l.DF},91007:function(e,l){l.DF={prefix:"fab",iconName:"whatsapp",icon:[448,512,[],"f232","M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"]},l.VH=l.DF},75421:function(e,l){l.DF={prefix:"fab",iconName:"x-twitter",icon:[512,512,[],"e61b","M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"]},l.NC=l.DF},85002:function(e,l){l.DF={prefix:"far",iconName:"arrow-down",icon:[384,512,[8595],"f063","M174.6 472.6c4.5 4.7 10.8 7.4 17.4 7.4s12.8-2.7 17.4-7.4l168-176c9.2-9.6 8.8-24.8-.8-33.9s-24.8-8.8-33.9 .8L216 396.1 216 56c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 340.1L41.4 263.4c-9.2-9.6-24.3-9.9-33.9-.8s-9.9 24.3-.8 33.9l168 176z"]},l.r5=l.DF},56269:function(e,l){Object.defineProperty(l,"__esModule",{value:!0});var t="circle-stop",n=[62094,"stop-circle"],i="f28d",s="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm192-96H320c17.7 0 32 14.3 32 32V320c0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32V192c0-17.7 14.3-32 32-32z";l.definition={prefix:"far",iconName:t,icon:[512,512,n,i,s]},l.faCircleStop=l.definition,l.prefix="far",l.iconName=t,l.width=512,l.height=512,l.ligatures=n,l.unicode=i,l.svgPathData=s,l.aliases=n},44835:function(e,l){l.DF={prefix:"far",iconName:"clipboard-check",icon:[384,512,[],"f46c","M320 64H280h-9.6C263 27.5 230.7 0 192 0s-71 27.5-78.4 64H104 64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64zM80 112v24c0 13.3 10.7 24 24 24h88 88c13.3 0 24-10.7 24-24V112h16c8.8 0 16 7.2 16 16V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V128c0-8.8 7.2-16 16-16H80zm88-32a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zM289 267.6c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-89.7 89.7L129 287c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l53.3 53.3c4.5 4.5 10.6 7 17 7s12.5-2.5 17-7L289 267.6z"]},l.E9=l.DF},29658:function(e,l){l.DF={prefix:"far",iconName:"link",icon:[640,512,[128279,"chain"],"f0c1","M580.3 267.2c56.2-56.2 56.2-147.3 0-203.5C526.8 10.2 440.9 7.3 383.9 57.2l-6.1 5.4c-10 8.7-11 23.9-2.3 33.9s23.9 11 33.9 2.3l6.1-5.4c38-33.2 95.2-31.3 130.9 4.4c37.4 37.4 37.4 98.1 0 135.6L433.1 346.6c-37.4 37.4-98.2 37.4-135.6 0c-35.7-35.7-37.6-92.9-4.4-130.9l4.7-5.4c8.7-10 7.7-25.1-2.3-33.9s-25.1-7.7-33.9 2.3l-4.7 5.4c-49.8 57-46.9 142.9 6.6 196.4c56.2 56.2 147.3 56.2 203.5 0L580.3 267.2zM59.7 244.8C3.5 301 3.5 392.1 59.7 448.2c53.6 53.6 139.5 56.4 196.5 6.5l6.1-5.4c10-8.7 11-23.9 2.3-33.9s-23.9-11-33.9-2.3l-6.1 5.4c-38 33.2-95.2 31.3-130.9-4.4c-37.4-37.4-37.4-98.1 0-135.6L207 165.4c37.4-37.4 98.1-37.4 135.6 0c35.7 35.7 37.6 92.9 4.4 130.9l-5.4 6.1c-8.7 10-7.7 25.1 2.3 33.9s25.1 7.7 33.9-2.3l5.4-6.1c49.9-57 47-142.9-6.5-196.5c-56.2-56.2-147.3-56.2-203.5 0L59.7 244.8z"]},l.nN=l.DF},33542:function(e,l){l.DF={prefix:"far",iconName:"slash-forward",icon:[320,512,[],"2f","M308.1 3.3c11.4 6.7 15.3 21.4 8.6 32.8l-272 464c-6.7 11.4-21.4 15.3-32.8 8.6S-3.4 487.3 3.3 475.9l272-464C282 .4 296.7-3.4 308.1 3.3z"]},l.D2=l.DF},36:function(e,l,t){var n=t(56269);l.DF={prefix:n.prefix,iconName:n.iconName,icon:[n.width,n.height,n.aliases,n.unicode,n.svgPathData]},l.oD=l.DF,n.prefix,n.iconName,n.width,n.height,n.aliases,n.unicode,n.svgPathData,n.aliases},27668:function(e,l){l.DF={prefix:"far",iconName:"trash-clock",icon:[576,512,[],"e2b0","M177.1 48h93.7c2.7 0 5.2 1.3 6.7 3.6l19 28.4h-145l19-28.4c1.5-2.2 4-3.6 6.7-3.6zM354.2 80L317.5 24.9C307.1 9.4 289.6 0 270.9 0H177.1c-18.7 0-36.2 9.4-46.6 24.9L93.8 80H80.1 32 24C10.7 80 0 90.7 0 104s10.7 24 24 24H35.6L59.6 452.7c2.5 33.4 30.3 59.3 63.8 59.3H324.6c2 0 3.9-.1 5.8-.3c-18.2-12.9-33.8-29.1-45.9-47.7h-161c-8.4 0-15.3-6.5-16-14.8L83.7 128H364.3l-5.9 80.1c15.3-7.1 31.9-12 49.2-14.4l4.9-65.7H424c13.3 0 24-10.7 24-24s-10.7-24-24-24h-8H367.9 354.2zM576 368a144 144 0 1 0 -288 0 144 144 0 1 0 288 0zM432 288c8.8 0 16 7.2 16 16v48h32c8.8 0 16 7.2 16 16s-7.2 16-16 16H432c-8.8 0-16-7.2-16-16V304c0-8.8 7.2-16 16-16z"]},l.yZ=l.DF},13155:function(e,l){l.DF={prefix:"fas",iconName:"bookmark",icon:[384,512,[128278,61591],"f02e","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z"]},l.xV=l.DF},94994:function(e,l,t){t.d(l,{u:function(){return c}});var n=t(97458),i=t(9839),s=t(94568),o=t(97379),r=t(89782),a=t(67571);let c=e=>{var l,t,c;let d,u,m,{firstResult:h}=e;if(!h)return null;let x=(0,r.EH)(h);if(!x)return null;let v=null!==(t=h.s3_social_preview_url)&&void 0!==t?t:a.FO;(0,s.rZ)(h)&&(null===(l=h.article_info)||void 0===l?void 0:l.title)?(d=h.article_info.title,u=null==h?void 0:null===(c=h.article_info)||void 0===c?void 0:c.read_time,m=null==h?void 0:h.author_username):h.thread_title&&h.thread_title!==i.i?d=h.thread_title:h.query_str&&(d=h.query_str),d&&(d=(0,r.aF)(d,80));let f=x.answer?(0,r.aF)(x.answer,160):null;return(0,n.jsx)(o.y,{imageURL:v,title:d,description:f,readTime:u,datePublished:null==h?void 0:h.updated_datetime,author:m})}},23915:function(e,l,t){t.r(l),t.d(l,{default:function(){return _}});var n=t(97458),i=t(52983),s=t(86231),o=t.n(s),r=t(31737),a=t(35638),c=t(62309),d=t(46563),u=t(89782),m=t(87552),h=t(11556),x=t(43902),v=t(38474),f=t(51865),p=t.n(f);let g=e=>{var l;let{submit:t,editQueryValue:s,setEditQueryValue:o,setIsEditingQuery:f,isEditingQuery:g,isFirstResult:b}=e,y=(0,r.useTranslations)("shared"),{trackEvent:j}=(0,c.h)(),{isMobileStyle:w,isMobileUserAgent:k}=(0,d.d)(),{isFailed:C,result:_,isReadonly:N,isSnapshotRender:D}=(0,a.T)(),U=null==_?void 0:_.backend_uuid,S=null==_?void 0:_.frontend_context_uuid,I=null==_?void 0:_.query_str,T=(0,i.useCallback)(()=>{if(t){j("confirm edit query click",{entryUUID:U,newQuery:s});let e=(0,u.Mp)();t({rawQuery:s,existingEntryUUID:U,redoSearch:!0,collection:null,newFrontendContextUUID:N?e:null,existingFrontendContextUUID:N?null:S,promptSource:"user",querySource:"edit"})}},[t,j,s,U,S,N]),M=(0,i.useCallback)(()=>{o(null!=I?I:""),f(!1),j("cancel edit query click",{entryUUID:U})},[o,I,f,j,U]),E=(0,i.useCallback)(e=>{m.t.isEnterKeyWithoutShift(e)&&(e.preventDefault(),T())},[T]),F=""===s,L=(null!==(l=null==I?void 0:I.length)&&void 0!==l?l:0)>200;return(0,n.jsx)("div",{className:p()({"my-md md:my-lg":!D,"my-md":D}),children:g?(0,n.jsx)("div",{className:"flex w-full",children:(0,n.jsx)("div",{className:"grow",children:(0,n.jsx)(x.Z,{isMobileUserAgent:k,isMobileStyle:w,onKeyDown:E,autoFocus:!0,size:"large",wrapperClassName:"grow",value:s,onChange:e=>o(e.target.value),inlineEditBlock:(0,n.jsxs)("div",{className:"flex items-center gap-x-xs pl-sm",children:[(0,n.jsx)(v.Z,{text:y("cancel"),size:"small",pill:!0,onClick:M}),(0,n.jsx)(v.Z,{text:y("save"),pill:!0,variant:F?"common":"primary",size:"small",disabled:F,onClick:T})]})})})}):(0,n.jsx)(h.Z,{variant:L?"baseSemi":"entry-title",as:b?"h1":"div",className:p()("whitespace-pre-line break-words [word-break:break-word]",{"whitespace-pre-wrap":L}),children:C?(0,n.jsx)("div",{className:"flex items-center gap-x-sm",children:(0,n.jsx)("span",{children:null!=I?I:"Something went wrong..."})}):I})})};var b=t(79755),y=t(6139),j=t(25929);let w=o()(()=>Promise.all([t.e(5349),t.e(8148),t.e(8204),t.e(5594),t.e(281),t.e(5233),t.e(3388),t.e(3032),t.e(6354)]).then(t.bind(t,47736)).then(e=>e.ThreadContent),{loadableGenerated:{webpack:()=>[47736]},loading:()=>(0,n.jsx)(b.a,{})}),k=o()(()=>Promise.all([t.e(8204),t.e(3388),t.e(485)]).then(t.bind(t,40485)),{loadableGenerated:{webpack:()=>[40485]}}),C=(0,i.forwardRef)((e,l)=>{var t;let{result:s,inFlight:o,showAnimations:r=!1,isLastResult:m=!1,isFirstResult:h=!1,isSnapshotRender:x,idx:v,submit:f,onRelatedButtonClick:b,onTextSelectClick:C,showSurvey:_=!1,onBotStep:N,deleteLast:D,isReadonly:U}=e,{isMobileStyle:S}=(0,d.d)(),{trackEvent:I}=(0,c.h)(),T=(0,i.useRef)(null),M=(0,i.useRef)(o),[E,F]=(0,i.useState)(!1),[L,Z]=(0,i.useState)(null!==(t=null==s?void 0:s.query_str)&&void 0!==t?t:""),R=(0,i.useMemo)(()=>{var e;return s?(0,y.c)(null!==(e=s.text)&&void 0!==e?e:""):[]},[s]),H=(null==s?void 0:s.status)==="failed",z=(null==s?void 0:s.status)==="pending",P=null!=R&&R.length>0,A=!P||"FINAL"===R[R.length-1].step_type,O=(0,i.useMemo)(()=>s?(0,u.EH)(s):null,[s]),B=(0,i.useMemo)(()=>{var e;return H?[]:null!==(e=null==s?void 0:s.media_items)&&void 0!==e?e:[]},[null==s?void 0:s.media_items,H]),V=!S&&A,q=(0,i.useMemo)(()=>B.filter(e=>"image"===e.medium||"map"===e.medium),[B]);(0,i.useEffect)(()=>{let e=h&&m,l=M.current&&!o;e&&l&&A&&(()=>{let e=setTimeout(()=>{I("engaged",{})},1e4);return()=>{clearTimeout(e)}})(),M.current=o},[o,h,A,m,I]);let G=q.length>0,W=(0,i.useCallback)(e=>{var l,t,n;f({existingEntryUUID:null!==(l=null==s?void 0:s.backend_uuid)&&void 0!==l?l:void 0,newFrontendContextUUID:null,existingFrontendContextUUID:null==s?void 0:s.frontend_context_uuid,deletedUrls:e,rawQuery:null!==(t=null==s?void 0:s.query_str)&&void 0!==t?t:"",existingUuid:null!==(n=null==s?void 0:s.uuid)&&void 0!==n?n:void 0,collection:null,promptSource:"user",querySource:"citation_modal"})},[f,null==s?void 0:s.backend_uuid,null==s?void 0:s.frontend_context_uuid,null==s?void 0:s.query_str,null==s?void 0:s.uuid]);return s?(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{ref:l}),(0,n.jsx)("div",{ref:T}),(0,n.jsx)(a.A,{idx:v,result:s,response:O,inFlight:o,isReadonly:U,isPending:z,hasSteps:P,isCopilot:P,mediaItems:B,filteredMediaItems:q,isFailed:H,isFinalStep:A,isSnapshotRender:x,isLastResult:m,children:(0,n.jsx)(j.ZP,{className:p()("pb-lg",{"border-b":!m&&!x,"min-h-[54vh]":o&&m&&!x}),children:(0,n.jsxs)("div",{className:x?"":x?G?"md:grid grid-cols-12 gap-md":"":"md:grid grid-cols-12 gap-xl",children:[(0,n.jsxs)("div",{className:x?"":"col-span-8",children:[(0,n.jsx)(g,{setEditQueryValue:Z,isFirstResult:h,submit:f,setIsEditingQuery:F,isEditingQuery:E,editQueryValue:L}),(0,n.jsx)(w,{isEntryInFlight:"pending"===s.status,onRelatedButtonClick:b,onTextSelectClick:C,showSurvey:_,onBotStep:N,deleteLast:D,localRef:T,showAnimations:r,submit:f,submitSourcesCuration:W,setIsEditingQuery:F,isEditingQuery:E,setEditQueryValue:Z})]}),(0,n.jsx)("div",{className:x?"":"col-span-4",children:!x&&V&&(0,n.jsx)(k,{isStreaming:z,showAnimations:r})})]})})})]}):(0,n.jsx)("div",{})});C.displayName="ThreadEntry";var _=C},10440:function(e,l,t){t.d(l,{j:function(){return eO}});var n=t(97458),i=t(52983),s=t(59842),o=t(86231),r=t.n(o),a=t(14408),c=t(47532),d=t(31737),u=t(53541),m=t(49237),h=t(48146),x=t(95712),v=t(61061),f=t(89540),p=t(96339),g=t(85002),b=t(46563),y=t(89782),j=t(25929),w=t(38474),k=t(51865),C=t.n(k),_=t(48740),N=t(12722),D=t(77837),U=t.n(D);let S=e=>{let{left:l,width:t,showStopButton:s,scrollToLatestEntry:o,showScrollButton:r,hasScrolled:a,setHasScrolled:k,existingFrontendContextUUID:D,moreThanOneResult:S,lastEntryUUID:I,isReadonly:T}=e,M=(0,d.useTranslations)("askInput"),E=(0,d.useTranslations)("shared"),F=(0,u.useSearchParams)(),L=null==F?void 0:F.get("q"),{submitQuery:Z}=(0,f.e)(),R=(0,u.useRouter)(),H=(0,x.lG)(),z=(0,v.nO)(),{data:P}=(0,c.useSession)(),{inFlight:A}=(0,p.a0)(),{isMobileStyle:O}=(0,b.d)(),B=(0,i.useCallback)(e=>{let l=(0,y.Mp)();if(Z({fork:T,rawQuery:e.query,copilotOverride:!!H&&void 0,attachments:e.attachments,collection:null,newFrontendContextUUID:T?l:null,existingFrontendContextUUID:T?null:D,promptSource:"user",querySource:"followup",timeFromFirstType:e.timeFromFirstType}),T){let e=new URLSearchParams({q:"pending",newFrontendContextUUID:l}),t=new URL(window.location.href);t.pathname="search",t.search=e.toString();let n=t.toString();R.push(n)}},[T,Z,H,D,R]),{setUserInput:V,...q}=(0,h.l)({clearInputOnSubmit:!0,onSubmit:U()(B,1e3,{leading:!0})}),G=(0,i.useCallback)(()=>{null==z||z.emit("perplexity_terminate",{entry_uuid:I})},[I,z]);return((0,i.useEffect)(()=>{""!=L&&V("")},[L,V]),l<=0)?null:(0,n.jsx)(j.ZP,{style:{left:O?"0px":"".concat(l,"px"),width:O?"100%":"".concat(t,"px")},className:C()("pointer-events-none fixed z-10 grid-cols-12 gap-xl px-sm py-sm md:bottom-lg md:grid md:px-0",{"bottom-mobileNavHeight":P,"bottom-safeAreaInsetBottom":!P}),children:(0,n.jsxs)("div",{className:"pointer-events-auto md:col-span-8",children:[(0,n.jsx)(_.M,{initial:!1,children:r&&!a&&S&&(0,n.jsx)(N.E.div,{className:"mb-2 flex justify-center",initial:{opacity:0,y:5},animate:{opacity:1,y:0,transition:{delay:1,duration:.15,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.1,ease:"easeOut"}},children:(0,n.jsx)("div",{className:"inline-flex rounded-full bg-offset shadow-md dark:bg-offsetDark",children:(0,n.jsx)(w.Z,{size:"small",variant:"common",icon:g.r5,layout:"center",pill:!0,onClick:()=>{o(),k(!0)},toolTip:E("scrollToBottom")})})})}),(0,n.jsx)(m.m,{...q,isFollowUp:!0,disabled:A,placeholder:O&&A?"":M("placeholderFollowUp"),submitWillFork:T,showStopButton:s,onStopButtonClick:G})]})})};var I=t(4403),T=t(6139),M=t(53999),E=t(55814),F=t(40267),L=t(6941),Z=t(80973),R=t(12258),H=t(94994),z=t(23915),P=t(820),A=t(24819),O=t.n(A),B=t(70261),V=t(94589),q=t(7871),G=t(99407),W=t(11556),Q=t(84981),J=e=>{let{currentCollection:l,size:t,handleCollectionChange:i,viewOnly:s}=e,o=(0,d.useTranslations)("shared");if(s&&!l)return null;let r=(0,n.jsxs)(W.Z,{variant:"small"===t?"tiny":"smallBold",color:"light",className:"flex cursor-pointer select-none items-center gap-x-xs px-sm py-xs transition duration-300 hover:opacity-70",children:[(0,n.jsx)(P.G,{icon:G.r8}),(0,n.jsx)("span",{className:"whitespace-nowrap",children:o("collection")})]});return(0,n.jsx)("div",{children:l?l?(0,n.jsx)(O(),{href:"/collections/".concat(l.slug),children:(0,n.jsxs)(W.Z,{variant:"small"===t?"tiny":"smallBold",className:"flex cursor-pointer select-none items-center gap-x-xs px-sm py-xs transition duration-300 hover:opacity-70",children:[(0,Q.Nl)(l.user_permission)?(0,n.jsx)(P.G,{icon:q.xV,className:"mr-xs text-textMain",size:"sm"}):(0,n.jsx)(V.B,{unified:l.emoji,size:"tiny"}),(0,n.jsx)("span",{className:"overflow-hidden truncate text-ellipsis",children:(0,B.Y)(l,o)})]})}):null:(0,n.jsx)("div",{onClick:s?void 0:i,children:r})})},Y=t(86634),K=t(28492),X=t(41275),$=t(92093),ee=t(5299),el=t(45233),et=t(64038),en=t(96049),ei=t(1809),es=t(38213),eo=t(82122),er=t(8245),ea=t(22381),ec=t(27668);function ed(e){let{utcTimestamp:l}=e,t=function(e){let l=(0,d.useTranslations)("threads.entry.expiration"),t=+new Date,n=(0,i.useMemo)(()=>+new Date(e+"Z"),[e])-t;return n<0?null:n>864e5?l("expiresInDays",{days:Math.floor(n/864e5)}):n>36e5?l("expiresInHours",{hours:Math.floor(n/36e5)}):l("expiresInMinutes",n>6e4?{minutes:Math.floor(n/6e4)}:{minutes:1})}(l);return t?(0,n.jsxs)(W.Z,{variant:"tiny",color:"light",className:"flex cursor-default items-center gap-x-xs",children:[(0,n.jsx)(P.G,{icon:ec.yZ}),(0,n.jsx)("span",{className:"truncate",suppressHydrationWarning:!0,children:t})]}):null}var eu=t(19381),em=t(51253),eh=t(49544),ex=()=>{let{firstResult:e,socialStats:l}=(0,p.a0)();if(!(null==e?void 0:e.backend_uuid))return null;let t=l&&l.viewCount>0,i=l&&l.forkCount>0;return t||i?(0,n.jsxs)(j.ZP,{className:"flex items-center gap-x-sm",children:[t&&(0,n.jsxs)(W.Z,{variant:"tiny",color:"light",className:"flex items-center gap-x-xs",children:[(0,n.jsx)(P.G,{size:"sm",fixedWidth:!0,icon:eh.Md}),(0,n.jsx)("div",{children:(0,y.uf)(l.viewCount)})]}),i&&(0,n.jsxs)(W.Z,{variant:"tiny",color:"light",className:"flex items-center gap-x-xs",children:[(0,n.jsx)(P.G,{size:"sm",fixedWidth:!0,icon:em.MD}),(0,n.jsx)("div",{children:(0,y.uf)(l.forkCount)})]})]}):null},ev=t(96299);let ef=r()(()=>Promise.all([t.e(9402),t.e(9974),t.e(5349),t.e(7094),t.e(1987),t.e(4605),t.e(1559),t.e(2483),t.e(1912),t.e(2037),t.e(5559),t.e(4320)]).then(t.bind(t,55559)).then(e=>e.TimeAgoTooltip),{loadableGenerated:{webpack:()=>[55559]},ssr:!1}),ep=i.memo(e=>{let{focus:l,authorUsername:t,threadAccess:i,authorImage:s}=e,{threadMetadata:o}=(0,p.a0)(),r=!t,a=(0,er.k)(),{locale:c}=(0,eo.z)();return(0,n.jsxs)("div",{className:"flex items-center gap-x-md",children:[!r&&(0,n.jsx)(j.ZP,{className:"hidden rounded-full md:block",children:(0,n.jsx)(ea.Z,{image:null!=s?s:void 0,username:null!=t?t:void 0,showAvatar:!0,showCreatorLabel:!1,showEdit:!1,isCurrentUser:!1})}),null!==l&&"internet"!==l&&(0,n.jsx)(j.ZP,{className:"hidden rounded-full md:block",children:(0,n.jsx)(eu.Z,{textVariant:"smallBold",focus:l})}),!r&&(null!=i?i:0)>=ev.uv.PUBLIC_READ&&(0,n.jsx)("div",{className:"hidden md:block",children:(0,n.jsx)(ex,{})}),o.expiry_time?(0,n.jsx)("div",{className:"hidden md:block",children:(0,n.jsx)(ed,{utcTimestamp:o.expiry_time})}):(0,n.jsx)("div",{className:"hidden md:block",children:(0,n.jsx)(ef,{timestamp:o.updated_datetime,layoutType:"bottom",translations:a,style:"narrow",locale:c})})]})});var eg=t(46590),eb=t(81993),ey=t(4030),ej=t(39294),ew=t(46402),ek=t(40236),eC=t(1845),e_=t(67571),eN=t(76022);let eD=i.memo(e=>{var l,t;let{descriptionText:i,sharableURL:s}=e,{openModal:o}=(0,ei.X)(),r=(0,eC.f)(),a=(0,x.lG)(),c=(0,eb.NL)(),{threadMetadata:u}=(0,p.a0)(),m=u.rwToken,h=u.frontendContextUUID,v=u.contextUUID,f=u.collection,g=null!==(t=null!==(l=null==f?void 0:f.access)&&void 0!==l?l:u.thread_access)&&void 0!==t?t:e_.k6,b=(0,ej.O)(),y=(0,d.useTranslations)("search.thread"),j=(0,d.useTranslations)("shared"),w=e=>{e!==g&&(a?null!=v&&null!=m&&b(v,e,m,e=>{c.setQueryData(["results",{frontend_context_uuid:h}],l=>{if(!l)return;let[t,...n]=l;return[{...t,thread_access:e},...n]})}):o("loginModal",{pitchMessage:{title:y("shareLogin",{threads:"Threads"}),description:y("shareDescription",{threads:"Threads",collections:"Collections"})},origin:ev.FM.SHARE_DROPDOWN}))},k=(0,ek.o)({currentAccessLevel:g,onClick:w,isCollection:!1}),C=k[g],_=g>ev.uv.PRIVATE_READ,N=null!=f,D=N?(0,B.Y)(f,j):null,U=k[null==f?void 0:f.access],S=(0,n.jsxs)("div",{className:"p-sm",children:[N?(0,n.jsxs)("div",{children:[(0,n.jsx)(W.Z,{variant:"baseSemi",children:y("viewAccess")}),(0,n.jsxs)("div",{className:"mt-sm rounded border p-sm",children:[(0,n.jsxs)(W.Z,{variant:"smallBold",color:"super",className:"flex items-center gap-x-xs",children:[(0,n.jsx)(P.G,{icon:null==U?void 0:U.icon}),null==U?void 0:U.text]}),(0,n.jsx)(W.Z,{variant:"tiny",color:"light",children:null==U?void 0:U.label})]}),(0,n.jsx)(W.Z,{variant:"tiny",className:"my-sm",children:y("viewAccessInheritance",{collection:D})})]}):null!=m?(0,n.jsxs)("div",{children:[(0,n.jsx)(W.Z,{variant:"baseSemi",children:y("viewAccess")}),(0,n.jsx)(eN.Z,{choices:k})]}):null,(0,n.jsx)(ey.Z,{descriptionText:i,shareHref:s,isSharable:_,hasMounted:r,icon:null==C?void 0:C.icon})]});return(0,n.jsx)(ew.Z,{isSharable:_,hasMounted:r,shareHref:s,EditorDropDownContent:S,icon:null==C?void 0:C.icon,onClick:()=>w(ev.uv.PUBLIC_READ)})}),eU=i.memo(e=>{let{visible:l,tweetDescriptionText:t,threadSharedSlug:s}=e,o=(0,eC.f)(),[r,a]=(0,i.useState)("");(0,i.useEffect)(()=>{let{protocol:e,host:l}=window.location;a("".concat(e,"//").concat(l,"/search/").concat(s))},[s]);let c=(0,i.useMemo)(()=>encodeURIComponent(o?(0,y.RP)(decodeURIComponent(r)):""),[r,o]),d=(0,i.useMemo)(()=>null!=t?"Perplexity AI: ".concat(t):"Perplexity AI",[t]),u=(0,i.useMemo)(()=>C()("transition-all duration-300 opacity flex items-center gap-x-xs md:gap-x-0",{"opacity-0":!l,"opacity-100":l}),[l]);return(0,n.jsx)("div",{className:u,children:l&&(0,n.jsx)(eD,{descriptionText:d,sharableURL:c})})});var eS=t(9839),eI=t(80937),eT=t(21139),eM=t(33542),eE=t(13155),eF=t(24121);let eL=i.memo(e=>{var l,t,s,o,r;let{entryUUID:a,frontendContextUUID:c,collection:m,bookmarkState:h,isFirstResultPending:v}=e,[f,g]=(0,i.useState)(!1),k=(0,u.useRouter)(),C=(0,eC.f)(),_=(0,x.lG)(),{collections:N}=(0,ee.l)(),D=(0,M.p)(),{searchTerm:U}=(0,es.p)(),S=(0,$.J)(),{deleteThread:I}=(0,el.l)(),{openModal:T,closeModal:F}=(0,ei.X)(),{refetch:L,addItemToSidebar:Z}=(0,et.f)(),{removeThreadFromCollection:R,swapThreadCollection:H,firstTimeBookmark:z}=(0,X.Fb)(),{isLoading:A,threadMetadata:O}=(0,p.a0)(),{trackEvent:B}=(0,E.WS)(),V=(0,d.useTranslations)("search.thread"),G=(0,d.useTranslations)("threadItem"),eo=(0,d.useTranslations)("article"),er=(0,d.useTranslations)("shared"),{allowArticleCreation:ea}=(0,en.v)(),{isMobileStyle:ec}=(0,b.d)(),ed=O.privacy_state===ev.Jr.INCOGNITO,eu="BOOKMARKED"===h;(0,i.useEffect)(()=>{let e=O.title||O.first_query,l=O.thread_url_slug;D&&C&&e&&l&&!ed&&(Z({id:a,variant:"thread",title:e,permalink:"/search/".concat(l,"?newFrontendContextUUID=").concat(c)}),L())},[O,D,C,c,a,Z,L,ed]);let{checkShouldOpenLossAversion:em,handleOpenLossAversion:eh}=(0,eg.GK)(),ex=(0,i.useCallback)(()=>{em()?eh({args:{origin:ev.FM.NEW_THREAD_BUTTON}}):k.push("/")},[em,eh,k]),ef=(0,i.useCallback)(()=>{B("click back button",{}),ex()},[ex,B]),eb=(0,i.useCallback)(()=>{B("click logo",{}),ex()},[ex,B]),ey=(0,i.useCallback)(()=>{a&&(B("delete thread from search result page click",{entryUUID:a}),I({entryUUID:a,callback:()=>k.push("/")}))},[I,a,k,B]),ej=(0,i.useCallback)(()=>{if(eu||!a)return;let e=N.find(e=>(0,Q.Nl)(e.user_permission));if(void 0===e)z({entryUUID:a,frontendContextUUID:c});else{var l;H({entryUUID:a,newCollectionTitle:e.title,newCollectionUUID:e.uuid,newCollectionSlug:e.slug,newCollectionAccess:e.access,frontendContextUUID:c,newCollectionEmoji:null!==(l=e.emoji)&&void 0!==l?l:null,currentCollectionUUID:null,existingCollectionSlug:null,closeModal:()=>{}})}},[eu,a,N,m,c]),ew=(0,i.useCallback)(()=>{if(_){if(0===N.length)S.listUserCollections(e=>{if(0===e.length)T("collectionCreateOrEdit",{frontendContextUUID:c,existingCollection:null,searchTerm:U});else{var l;T("collectionSelectModal",{entryUUID:a,userCollections:e,currentCollection:m,searchTerm:null!==(l=O.first_query)&&void 0!==l?l:"",frontendContextUUID:c})}});else{var e;T("collectionSelectModal",{entryUUID:a,userCollections:N,currentCollection:m,searchTerm:null!==(e=O.first_query)&&void 0!==e?e:"",frontendContextUUID:c})}}else T("loginModal",{pitchMessage:{title:V("headerLogin",{threads:"Threads"})},origin:ev.FM.COLLECTIONS})},[m,S,a,c,_,T,U,V,O.first_query,N]),ek=(0,i.useCallback)(()=>{if(_){g(!0);let e=(0,y.Mp)();B("click convert thread to page",{oldContextUUID:O.contextUUID,newFrontendContextUUID:e});let l=new URLSearchParams({newFrontendContextUUID:e,existingResultsCacheUUID:c,existingContextBackendUUID:O.contextUUID}),t=new URL(window.location.href);t.pathname="page/new",t.search=l.toString();let n=t.toString();k.push(n)}else T("loginModal",{pitchMessage:{title:eo("loginPrompt",{page:"Page"})},origin:ev.FM.THREAD_TO_ARTICLE})},[B,_,T,eo,k,c,O.contextUUID,g]),e_=()=>{R({entryUUID:a,oldCollectionUUID:null==m?void 0:m.uuid,callback:F,frontendContextUUID:c})},eN=(!!D&&_||null!=m)&&!ed,eD=(!!D&&_||O.title!=eS.i&&null!=O.title)&&!ed,eL=eN&&eD,eZ=ea&&!ec&&!v&&!ed,eR=!v&&!ed&&_,eH=ec&&!v,ez=(0,n.jsx)(w.Z,{icon:eu?eE.xV:q.xV,size:"small",variant:ec?"common":"border",toolTip:er(eu?"savedToBookmarks":"saveToBookmarks"),onClick:eu?e_:ej});return(0,n.jsx)(j.ZP,{variant:"background",className:"sticky left-0 right-0 top-0 z-20 border-b md:mb-0 md:rounded-t-xl",children:(0,n.jsxs)("div",{className:"flex items-center justify-between gap-x-md px-md py-sm md:min-h-[53px]",children:[(0,n.jsxs)("div",{className:"flex items-center gap-x-sm md:hidden",children:[(0,n.jsx)(eF.Z,{onClick:eb,size:"small",variant:"mark"}),(0,n.jsx)(w.Z,{variant:"common",size:"small",text:er("new"),icon:eI.faPlus,onClick:ef})]}),(0,n.jsx)("div",{children:!A&&(0,n.jsx)(ep,{focus:null!==(l=O.focus)&&void 0!==l?l:null,authorUsername:null!==(t=O.author_username)&&void 0!==t?t:null,threadAccess:null!==(s=O.thread_access)&&void 0!==s?s:0,authorImage:null!==(o=O.author_image)&&void 0!==o?o:null,expiryTime:O.expiry_time})}),(0,n.jsxs)("div",{className:"hidden max-w-md grow items-center justify-center gap-x-xs text-center md:flex",children:[eN&&(0,n.jsx)(J,{currentCollection:m,handleCollectionChange:ew,viewOnly:!_||!D}),eL&&(0,n.jsx)(W.Z,{variant:"smallBold",color:"light",children:(0,n.jsx)(P.G,{icon:eM.D2})}),eD&&(0,n.jsx)(eS.Z,{title:O.title||O.first_query,contextUUID:O.contextUUID,rwToken:D,frontendContextUUID:c})]}),(0,n.jsxs)("div",{className:"flex items-center gap-x-sm",children:[(0,n.jsxs)("div",{className:"flex items-center gap-sm",children:[(0,n.jsx)(Y.Z,{show:C&&!v&&_,isBookmarked:eu,onDelete:ey,onAddToCollection:ew,onSwapCollection:ew,onRemoveFromCollection:e_,currentCollection:m,rwToken:D,type:ed?K.W.INCOGNITO_SEARCH:K.W.SEARCH}),eR&&!ec&&ez,eZ&&(0,n.jsx)(w.Z,{text:G("convertThreadtoArticle"),size:"small",icon:eT.a_,onClick:ek,testId:"thread-article-create",variant:"border",isLoading:f,disabled:f})]}),eH&&(0,n.jsx)(w.Z,{size:"small",variant:"primary",text:"Open in App",href:"/download-mobile",onClick:()=>{B("clicked open in app button in mweb thread header",{})}}),eR&&ec&&ez,(0,n.jsx)(eU,{visible:!!O.thread_url_slug,tweetDescriptionText:O.title||O.first_query,threadSharedSlug:null!==(r=O.thread_url_slug)&&void 0!==r?r:void 0})]})]})})});var eZ=t(94568),eR=e=>{var l,t,i,s;let{parentInfo:o}=e,r=(0,d.useTranslations)("threadItem"),a="article"===o.mode?"page":"search",c="";return(0,eZ.rZ)(o)&&(null===(l=o.article_info)||void 0===l?void 0:l.title)?c=null!==(i=null===(t=o.article_info)||void 0===t?void 0:t.title)&&void 0!==i?i:"":"query_str"in o&&(c=null!==(s=o.query_str)&&void 0!==s?s:""),(0,n.jsx)(O(),{href:"/".concat(a,"/").concat(o.thread_url_slug),children:(0,n.jsx)(j.ZP,{variant:"offset",bgHover:"offsetPlus",className:"flex justify-between rounded-lg p-md md:mt-md",children:(0,n.jsxs)("div",{className:"",children:[(0,n.jsxs)(W.Z,{color:"light",variant:"tiny",className:"mb-xs flex items-center gap-x-xs",children:[(0,n.jsx)(P.G,{icon:em.MD}),(0,n.jsx)("div",{children:r("followupTo")})]}),(0,n.jsx)(W.Z,{variant:"section-title",color:"light",className:"line-clamp-1 break-all",children:c})]})})})},eH=t(7152),ez=t(46944);let eP=r()({loader:()=>t.e(6669).then(t.bind(t,96669)),ssr:!1},{loadableGenerated:{webpack:()=>[96669]}}),eA=r()({loader:()=>t.e(2923).then(t.bind(t,22923)),ssr:!1},{loadableGenerated:{webpack:()=>[22923]}}),eO=e=>{var l,t,o,r,c,d,u,m;let{}=e,h=(0,M.p)(),v=(0,L.X)(),[g,{left:w,width:k}]=(0,s.Z)(),{trackEvent:_}=(0,E.WS)(),{thread:N,inFlight:D,inFlightLatest:U,lastResult:P,threadMetadata:A}=(0,p.a0)(),O=null!==(r=null===(l=N[0])||void 0===l?void 0:l.frontend_context_uuid)&&void 0!==r?r:"",B=(0,x.lG)(),{isMobileStyle:V}=(0,b.d)(),{isIncognito:q}=(0,Z.Y)(),{lossAversionStatus:G,setLossAversionStatus:W,unsetLossAversion:Q}=(0,eg.JK)(),{submitQuery:J,handleBotStep:Y,deleteLastResult:K}=(0,f.e)(),{setFocus:X,focus:$,isCopilot:ee,setIsCopilot:el,gpt4Limit:et}=(0,R.h)();(0,i.useEffect)(()=>{var e,l;X(null!==(l=null===(e=N[0])||void 0===e?void 0:e.search_focus)&&void 0!==l?l:"internet"),el(N.some(e=>"copilot"===e.mode)&&!!et&&et>0)},[]),(0,i.useEffect)(()=>{var e;X(null!==(e=A.focus)&&void 0!==e?e:$)},[A.focus]);let en=(null==A?void 0:A.privacy_state)&&(q&&A.privacy_state!==ev.Jr.INCOGNITO||!q&&A.privacy_state===ev.Jr.INCOGNITO),ei=(0,i.useMemo)(()=>!!(!h&&(0,y.vl)(N)||en),[N,h,en]),es=0===N.length||D,eo=null!==(c=null==P?void 0:P.backend_uuid)&&void 0!==c?c:"",er=(null==N?void 0:null===(t=N[0])||void 0===t?void 0:t.status)==="pending",ea=(0,i.useCallback)(e=>{J(e)},[J]),ec=(0,i.useCallback)(e=>{J(e)},[J]),{refs:ed,scrollToLatestItem:eu,showScrollButton:em,hasScrolled:eh,setHasScrolled:ex,scrollToListItem:ef}=(0,F.$)({items:N,inFlight:D,inFlightLatest:U,rwToken:h}),ep=(0,i.useCallback)(e=>{ef(e.existingEntryUUID,!0),J(e)},[ef,J]),eb=(0,i.useMemo)(()=>{var e,l;let t=(0,T.c)(null!==(l=null==P?void 0:P.text)&&void 0!==l?l:""),n=ee&&(null===(e=t[t.length-1])||void 0===e?void 0:e.step_type)==="FINAL",i=!ee&&null!=P&&!!P.text&&JSON.parse(P.text).answer;return N&&(n||i)&&(null==P?void 0:P.status)!=="completed"&&(null==P?void 0:P.backend_uuid)!==void 0&&D},[N,ee,null==P?void 0:P.text,null==P?void 0:P.status,null==P?void 0:P.backend_uuid,D]);return(0,i.useEffect)(()=>{(null==N?void 0:N.length)>=1&&(null==P?void 0:P.status)==="completed"&&_("thread viewed",{authorId:A.author_id,authorUsername:A.author_username,isThreadCreator:!!h})},[_]),(0,i.useEffect)(()=>{"cooldown"!==G&&(B||G||!h?h||Q():W("allowed"))},[B,G,h,W,Q]),(0,ez.kw)(()=>{"allowed"===G&&Q()}),(0,n.jsxs)(a.VY,{mobileHeader:!1,childrenWidth:"large",header:(0,n.jsx)(eL,{collection:null!==(d=A.collection)&&void 0!==d?d:null,bookmarkState:null!==(u=A.bookmarkState)&&void 0!==u?u:null,entryUUID:null!==(m=null===(o=N[0])||void 0===o?void 0:o.backend_uuid)&&void 0!==m?m:null,frontendContextUUID:O,isFirstResultPending:er}),children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(H.u,{firstResult:D?null:N[0]}),(0,n.jsx)("div",{className:C()("pt-md md:pb-[124px] md:pt-0",{"pb-[144px]":B}),children:(0,n.jsxs)(j.ZP,{variant:"background",className:"relative",children:[A.parent_info&&(0,n.jsx)(eR,{parentInfo:A.parent_info}),(0,n.jsx)("div",{ref:g,children:N.map((e,l)=>{var t,s,o;let r=0===l,a=l===N.length-1;return(0,n.jsx)(i.Fragment,{children:(0,n.jsx)(I.Z,{fallback:(0,n.jsx)(eH.o,{description:null!==(t=null==e?void 0:e.text)&&void 0!==t?t:"Please try again later."}),children:(0,n.jsx)("div",{ref:ed[l],children:(0,n.jsx)(z.default,{idx:l,result:e,inFlight:D,isReadonly:ei,showAnimations:es&&a,submit:ep,onRelatedButtonClick:ea,onTextSelectClick:ec,isLastResult:a,isFirstResult:r,onBotStep:l=>Y(e,l),showSurvey:!!v,deleteLast:a&&1!==N.length?()=>{var e;return K({frontendContextUUID:null===(e=N[0])||void 0===e?void 0:e.frontend_context_uuid})}:void 0})},null==e?void 0:e.backend_uuid)})},null!==(o=null!==(s=null==e?void 0:e.uuid)&&void 0!==s?s:null==e?void 0:e.backend_uuid)&&void 0!==o?o:l)})}),(0,n.jsx)(S,{left:w,width:k,lastEntryUUID:eo,showStopButton:eb,scrollToLatestEntry:eu,showScrollButton:em,hasScrolled:eh,setHasScrolled:ex,existingFrontendContextUUID:O,moreThanOneResult:N.length>1,isReadonly:ei})]})})]}),(0,n.jsxs)("div",{className:"md:hidden",children:[(0,n.jsx)(eP,{className:"mb-mobileNavHeight",havePrimaryButton:!1}),!D&&V&&(0,n.jsx)(eA,{})]})]})}},49237:function(e,l,t){t.d(l,{m:function(){return f}});var n=t(97458),i=t(52983),s=t(31737),o=t(1809),r=t(41289),a=t(36),c=t(46563),d=t(25929),u=t(38474),m=t(30706),h=t(12722),x=t(74334),v=t(48740);let f=i.memo(e=>{let{showStopButton:l,onStopButtonClick:t,...f}=e,{currentOpenedModal:p}=(0,o.X)(),{isMobileUserAgent:g}=(0,c.d)(),b=(0,s.useTranslations)("main.askInput"),y=(0,i.useCallback)(e=>{"Escape"===e.key&&l&&t&&null===p&&(e.preventDefault(),t())},[t,l,p]);return(0,i.useEffect)(()=>(document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}),[y]),(0,n.jsx)(d.ZP,{className:"w-full",children:(0,n.jsx)(m.A,{transition:{duration:.2,bounce:.2,type:"spring"},children:(0,n.jsx)(h.E.div,{layout:!0,layoutRoot:!0,className:"flex items-center gap-x-xs",children:(0,n.jsx)(x.S,{children:(0,n.jsxs)(v.M,{mode:"popLayout",initial:!1,children:[l&&(0,n.jsx)(h.E.div,{initial:{scale:.2,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.2,opacity:0},children:(0,n.jsx)(u.Z,{toolTip:b("stopGenerating"),variant:"rejecter",pill:!0,icon:a.oD,keyboardShortcut:["Esc"],onClick:t})},"stop-button"),(0,n.jsx)(h.E.div,{layout:!0,className:"grow",children:(0,n.jsx)(r.Z,{borderClass:"md:p-sm bg-offset dark:bg-offsetDark",hasShadow:!0,showFileUpload:!0,showCopilotToggle:!0,autofocus:null===p&&!g,querySource:f.submitWillFork?"fork":"followup",...f})},"ask-input")]})})})})})})},40267:function(e,l,t){t.d(l,{$:function(){return r}});var n=t(52983),i=t(1845),s=t(77837),o=t.n(s);let r=e=>{let{items:l,inFlight:t,inFlightLatest:s,rwToken:r,headerOffset:a=52}=e,[c,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(!1),h=(0,i.f)(),x=(0,n.useRef)(!0),v=(0,n.useMemo)(()=>!r&&l.every(e=>"pending"!==e.status),[l,r]),f=(0,n.useMemo)(()=>l.some(e=>"pending"===e.status),[l]),[p,g]=(0,n.useState)({}),[b,y]=(0,n.useState)({}),j=(0,n.useCallback)(function(e){var l,t;let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i="number"==typeof e?null===(l=p[e])||void 0===l?void 0:l.current:null===(t=b[e])||void 0===t?void 0:t.current;if(i){let e=i.getBoundingClientRect().top+window.scrollY-a;window.scrollTo({top:e,behavior:n?"smooth":"auto"})}},[p,b,a]),w=(0,n.useCallback)(()=>{j(l.length-1)},[j,l.length]);return(0,n.useEffect)(()=>{g(e=>{let t={...e},i={...b},s=!1;return l.forEach((e,l)=>{let o=e.backend_uuid;if(t[l]&&t[l].current)i[o]=t[l];else{let e=n.createRef();t[l]=e,i[o]=e,s=!0}}),Object.keys(t).forEach(e=>{l.some((l,t)=>t===Number(e))||(delete t[Number(e)],s=!0)}),s&&y(i),s?t:e})},[l.length,b,f]),(0,n.useEffect)(()=>{if(l.length<=1||!h)return;let e=window.location.hash;if(e&&!t&&x.current){try{let l=e.slice(1);l.length>3?j(l,!1):j(Number(l),!1)}catch(e){console.error(e)}return}s&&j(l.length-1)},[t,s,v,l.length,p,b,h,j]),(0,n.useEffect)(()=>{let e=o()(()=>{var e;let t=null===(e=p[l.length-1])||void 0===e?void 0:e.current;if(t){let e=t.getBoundingClientRect().top+window.scrollY-100,l=document.body.scrollHeight>window.innerHeight,n=window.innerHeight+window.scrollY>=document.body.scrollHeight-10;if(window.scrollY>=e||!l||n)c&&m(!0),d(!1);else{if(u)return;d(!0)}}},200);return e(),window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e),e.cancel()}},[p,c,u,l.length]),{refs:p,scrollToLatestItem:w,scrollToListItem:j,showScrollButton:c&&!u,hasScrolled:u,setHasScrolled:m}}},76022:function(e,l,t){var n=t(97458);t(52983);var i=t(25929),s=t(1326);l.Z=e=>{let{choices:l,...t}=e;return(0,n.jsx)(i.ZP,{className:"mt-sm divide-y rounded md:border",...t,children:l.map((e,l)=>(0,n.jsx)(s.s,{rounded:!1,...e},l))})}},7152:function(e,l,t){t.d(l,{o:function(){return r}});var n=t(97458),i=t(52983);let s=e=>{try{return JSON.parse(e)}catch(e){return null}},o="Please try again later.",r=i.memo(e=>{let{title:l="Sorry, something went wrong.",description:t=o,className:r,role:a,...c}=e,d=(0,i.useMemo)(()=>s(t),[t]);return d&&(t=o,console.warn("Tried to pass a JSON error description"),console.warn(d)),(0,n.jsxs)("div",{className:"mt-4 rounded-lg border-l-4 border-orange-500 bg-orange-100 p-4 text-left text-orange-700 ".concat(r),role:"alert",...c,children:[(0,n.jsx)("p",{className:"font-bold",children:l}),(0,n.jsx)("p",{children:t})]})})}}]);