!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="890f52ec-75dd-4533-adf0-49e3a0010139",e._sentryDebugIdIdentifier="sentry-dbid-890f52ec-75dd-4533-adf0-49e3a0010139")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8354,3530],{59021:function(e,t,n){n.d(t,{W:function(){return c}});var r=n(97458),o=n(820),a=n(52983),i=n(11556),s=n(89782);let c=a.memo(e=>{let{icon:t,count:n,textVariant:a="tiny",textColor:c="light",className:l}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-x-xs",children:[(0,r.jsx)(i.Z,{variant:a,color:c,className:l,children:(0,r.jsx)(o.G,{size:"sm",icon:t})}),(0,r.jsx)(i.Z,{variant:a,color:c,className:l,children:(0,s.uf)(n)})]})},(e,t)=>e.count===t.count&&e.icon===t.icon&&e.className===t.className)},22381:function(e,t,n){var r=n(97458),o=n(22696),a=n(47532),i=n(52983),s=n(31737),c=n(37464),l=n(50882),u=n(46563),d=n(95901),m=n(38474),h=n(11556),y=n(25929),p=n(78398);t.Z=e=>{var t,n,f;let{showAvatar:g,showCreatorLabel:v,showEdit:w,isCurrentUser:_=!0,textColor:j,textVariant:S="smallBold",username:T,image:b,anon:N,avatarSize:P="small"}=e,{data:A,update:k}=(0,a.useSession)(),[x,M]=i.useState(!1),[X,C]=i.useState(null!=T?T:_?null==A?void 0:null===(t=A.user)||void 0===t?void 0:t.username:"Anonymous"),[O,F]=i.useState(),{isMobileUserAgent:L}=(0,u.d)(),I=(0,s.useTranslations)("settings.account"),J=async()=>fetch("/api/user",{method:"PUT",body:JSON.stringify({username:X})}),{mutate:H,isPending:R}=(0,o.D)({mutationFn:J,onSuccess:e=>{e.json().then(t=>{if(200!==e.status){F(t.message);return}M(!1),F(void 0),k()})}});return(0,i.useEffect)(()=>{var e;C(null!=T?T:_?null==A?void 0:null===(e=A.user)||void 0===e?void 0:e.username:"Anonymous")},[T,_,null==A?void 0:null===(n=A.user)||void 0===n?void 0:n.username]),(0,r.jsxs)("div",{className:"relative flex items-center gap-x-xs",children:[g&&(0,r.jsx)(c.Z,{size:P,anon:N,user:null!=b?b:_&&null!==(f=null==A?void 0:A.user.image)&&void 0!==f?f:void 0}),x?(0,r.jsx)("div",{children:(0,r.jsx)(d.ZP,{isMobileUserAgent:L,value:X,disabled:R,errorText:null!=O?O:""===X?"Username cannot be empty":"",onChange:e=>{C(e.target.value)},className:"md:min-w-[300px]",inlineEditBlock:A&&(0,r.jsxs)("div",{className:"ml-sm flex items-center gap-x-xs",children:[(0,r.jsx)(m.Z,{text:I("save"),variant:X===A.user.username||""===X||R?"common":"primary",size:"small",disabled:X===A.user.username||""===X||R,onClick:()=>H()}),(0,r.jsx)(m.Z,{text:I("cancel"),size:"small",disabled:R,onClick:()=>{C(A.user.username),M(!1)}})]})})}):(0,r.jsx)(h.Z,{variant:S,color:j,className:"line-clamp-1 break-all",children:N?"Anonymous":X}),v&&(0,r.jsx)(y.ZP,{variant:"offset",className:"rounded-full px-sm py-xs",children:(0,r.jsx)(h.Z,{variant:"tiny",color:"light",children:"Author"})}),w&&!x&&(0,r.jsx)(p.Z,{pill:!0,size:"small",icon:l.faPenToSquare,onClick:()=>M(!0)})]})}},5299:function(e,t,n){n.d(t,{l:function(){return i}});var r=n(30574),o=n(61061),a=n(41275);let i=()=>{var e;let t=(0,o.nO)(),n=async e=>{let{pageParam:n}=e;(!n||n<1)&&(n=1);let r=(n-1)*50;return await (null==t?void 0:t.emitWithAck("list_user_collections",{limit:50,offset:r}))},{data:i}=(0,r.N)({enabled:!!t,queryKey:a.Xt,refetchOnReconnect:"always",initialPageParam:1,queryFn:e=>{let{pageParam:t}=e;return n({pageParam:t})},getNextPageParam:(e,t)=>{var n;return e&&(null===(n=e[0])||void 0===n?void 0:n.has_next_page)?t.length+1:void 0}});return{collections:null!==(e=null==i?void 0:i.pages[i.pages.length-1])&&void 0!==e?e:[]}}},64038:function(e,t,n){n.d(t,{G:function(){return c},f:function(){return d}});var r=n(81993),o=n(74512),a=n(52983),i=n(80973),s=n(1845);let c=8,l="recentItems",u=()=>{let e=localStorage.getItem(l);return e?JSON.parse(e):[]},d=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,s.f)(),n=(0,r.NL)(),{isIncognito:d}=(0,i.Y)(),m=(0,o.a)({queryKey:[l],queryFn:u,enabled:e}),h=(0,a.useCallback)(e=>{d||n.setQueryData([l],function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=new URL(e.permalink,"http://example.com"),r={...e,permalink:n.pathname},o=[r,...t.filter(t=>t.id!==e.id&&t.permalink!==r.permalink)].slice(0,c);return localStorage.setItem(l,JSON.stringify(o)),o})},[n,d]),y=(0,a.useCallback)(e=>{n.setQueryData([l],function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!t)return;let r=n.filter(t=>t.id!==e&&!t.permalink.endsWith(e));return localStorage.setItem(l,JSON.stringify(r)),r})},[t,n]),p=(0,a.useCallback)(()=>{n.setQueryData([l],[]),localStorage.removeItem(l)},[n]);return{...m,addItemToSidebar:h,removeItemFromSidebar:y,clearSidebarRecentItems:p}}},8245:function(e,t,n){n.d(t,{k:function(){return o}});var r=n(31737);let o=()=>{let e=(0,r.useTranslations)("shared");return{yearAgo:e("yearAgo"),yearsAgo:e("yearsAgo"),monthAgo:e("monthAgo"),monthsAgo:e("monthsAgo"),dayAgo:e("dayAgo"),daysAgo:e("daysAgo"),hourAgo:e("hourAgo"),hoursAgo:e("hoursAgo"),minutesAgo:e("minutesAgo"),minuteAgo:e("minuteAgo"),justNow:e("justNow"),justNowShort:e("justNowShort")}}},67937:function(e,t,n){n.d(t,{AM:function(){return u},G$:function(){return v},J1:function(){return s},M6:function(){return h},TF:function(){return a},Th:function(){return m},UF:function(){return f},eS:function(){return y},fz:function(){return l},jX:function(){return d},l8:function(){return c},mq:function(){return i},o_:function(){return o},tq:function(){return g},vE:function(){return p}});var r=n(67333);let o=async(e,t,n)=>{let o="sendUserFeedback";try{let a=await (0,r.$e)({urlPath:"rest/entry/feedback/".concat(e),timeoutMs:(0,r.vX)(),method:"POST",body:JSON.stringify({label:t,feedback:n}),headers:{"Content-Type":"application/json"}});return(0,r.HL)(o),a.json()}catch(e){throw(0,r.i8)(o,e),console.error("".concat(o," error:"),e),e}},a=async(e,t,n)=>{let o="updateArticleSectionTitle";if(n)try{let a=await (0,r.FX)({urlPath:"p/api/v1/article/section/title/".concat(e),timeoutMs:(0,r.vX)(),method:"PUT",body:JSON.stringify({read_write_token:n,title:t}),headers:{"Content-Type":"application/json"},numRetries:1});return(0,r.HL)(o),a.json()}catch(e){throw(0,r.i8)(o,e),console.error("".concat(o," error:"),e),e}},i=async(e,t,n)=>{let o="updateArticleSectionHeroOffset";if(n)try{let a=await (0,r.FX)({urlPath:"p/api/v1/article/section/hero_offset/".concat(e),timeoutMs:(0,r.vX)(),method:"PUT",body:JSON.stringify({read_write_token:n,hero_offset:t}),headers:{"Content-Type":"application/json"},numRetries:1});return(0,r.HL)(o),a.json()}catch(e){throw(0,r.i8)(o,e),console.error("".concat(o," error:"),e),e}},s=async(e,t)=>{let n="deleteArticleSection";if(e&&t)try{let o=await (0,r.FX)({urlPath:"p/api/v1/article/section/".concat(e),timeoutMs:(0,r.vX)(),method:"DELETE",body:JSON.stringify({read_write_token:t}),headers:{"Content-Type":"application/json"},numRetries:1}),a=await o.json();return(0,r.HL)(n),a}catch(e){throw(0,r.i8)(n,e),console.error("".concat(n," error:"),e),e}},c=async(e,t)=>{let n="updateArticleSectionsLayout";if(t&&0!==e.length)try{let o=await (0,r.FX)({urlPath:"p/api/v1/article/sections/layout",timeoutMs:(0,r.vX)(),method:"PUT",body:JSON.stringify({read_write_token:t,sections:e}),headers:{"Content-Type":"application/json"},numRetries:1}),a=await o.json();return(0,r.HL)(n),a}catch(e){throw(0,r.i8)(n,e),console.error("".concat(n," error:"),e),e}},l=async e=>{let{sectionUUID:t,mediaItem:n,targetIndex:o,rwToken:a,isNewMediaItem:i=!1}=e,s="updateArticleSectionImage";if(a)try{let e=await (0,r.FX)({urlPath:"p/api/v1/article/section/image/".concat(t),timeoutMs:(0,r.vX)(),method:"PUT",body:JSON.stringify({read_write_token:a,media_item:n,target_index:o,new_media_item:i}),headers:{"Content-Type":"application/json"},numRetries:1}),c=await e.json();return(0,r.HL)(s),c}catch(e){throw(0,r.i8)(s,e),console.error("".concat(s," error:"),e),e}},u=async function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a="addMediaItemToSectionSelectedImagesMutation";if(n)try{let i=await (0,r.FX)({urlPath:"p/api/v1/article/section/media/add/".concat(e),timeoutMs:(0,r.vX)(),method:"PUT",body:JSON.stringify({read_write_token:n,media_item:t,new_media_item:o}),headers:{"Content-Type":"application/json"},numRetries:1}),s=await i.json();return(0,r.HL)(a),s}catch(e){throw(0,r.i8)(a,e),console.error("".concat(a," error:"),e),e}},d=async(e,t,n)=>{let o="uploadImageToSectionMediaItemsMutation";if(n)try{let a=await (0,r.FX)({urlPath:"p/api/v1/article/section/upload_image/".concat(e),timeoutMs:(0,r.vX)(),method:"POST",body:JSON.stringify({read_write_token:n,content_type:t.type}),headers:{"Content-Type":"application/json"},numRetries:1}),i=await a.json();return(0,r.HL)(o),i}catch(e){throw(0,r.i8)(o,e),console.error("".concat(o," error:"),e),e}},m=async(e,t,n)=>{let o="addMediaItemToSectionSelectedImagesMutation";if(n)try{let a=await (0,r.FX)({urlPath:"p/api/v1/article/section/media/remove/".concat(e),timeoutMs:(0,r.vX)(),method:"PUT",body:JSON.stringify({read_write_token:n,media_item_image_url:t}),headers:{"Content-Type":"application/json"},numRetries:1}),i=await a.json();return(0,r.HL)(o),i}catch(e){throw(0,r.i8)(o,e),console.error("".concat(o," error:"),e),e}},h=async(e,t,n,o)=>{let a="reorderArticleSectionMutation";if(o)try{let i=await (0,r.FX)({urlPath:"p/api/v1/article/reorder/".concat(e),timeoutMs:(0,r.vX)(),method:"PUT",body:JSON.stringify({read_write_token:o,section_uuid:t,relative_move:n}),headers:{"Content-Type":"application/json"},numRetries:1}),s=await i.json();return(0,r.HL)(a),s}catch(e){throw(0,r.i8)(a,e),console.error("".concat(a," error:"),e),e}},y=async e=>{let t="terminateArticleSectionStreaming";if(e)try{let n=await (0,r.FX)({urlPath:"p/api/v1/article/section/terminate/".concat(e),timeoutMs:(0,r.vX)(),method:"POST",numRetries:1});return(0,r.HL)(t),n.json()}catch(e){throw(0,r.i8)(t,e),console.error("".concat(t," error:"),e),e}},p=async(e,t,n)=>{let o="addArticleSectionMediaItemMutation";if(n)try{let a=await (0,r.FX)({urlPath:"p/api/v1/article/section/add/media_item/".concat(e),timeoutMs:(0,r.vX)(),method:"PUT",body:JSON.stringify({read_write_token:n,media_item:t}),headers:{"Content-Type":"application/json"},numRetries:1}),i=await a.json();return(0,r.HL)(o),i}catch(e){throw(0,r.i8)(o,e),console.error("".concat(o," error:"),e),e}},f=async(e,t,n)=>{let o="removeWidgetFromEntryMutation";if(n)try{let a=await (0,r.$e)({urlPath:"rest/thread/entry/remove_widget",timeoutMs:(0,r.vX)(),method:"PUT",body:JSON.stringify({entry_uuid:e,read_write_token:n,url:t}),headers:{"Content-Type":"application/json"},numRetries:1}),i=await a.json();return(0,r.HL)(o),i}catch(e){throw(0,r.i8)(o,e),console.error("".concat(o," error:"),e),e}},g=async(e,t,n)=>{let o="toggleEmphasizeSources";try{let a=await (0,r.FX)({urlPath:"p/api/v1/article/emphasize_sources/".concat(e),timeoutMs:(0,r.vX)(),method:"PUT",body:JSON.stringify({read_write_token:t,value:n}),headers:{"Content-Type":"application/json"},numRetries:1}),i=await a.json();return(0,r.HL)(o),i}catch(e){throw(0,r.i8)(o,e),console.error("".concat(o," error:"),e),e}},v=async e=>{let t="disconnectConnector:".concat(e);try{let n=await (0,r.$e)({urlPath:"rest/connectors/".concat(e,"/disconnect"),method:"GET",headers:{"Content-Type":"application/json"},timeoutMs:(0,r.vX)({productionMs:500}),numRetries:1}),o=await n.json();return(0,r.HL)(t),o}catch(e){return console.log("Error in ".concat(t,":"),e),(0,r.i8)(t,e),null}}}}]);