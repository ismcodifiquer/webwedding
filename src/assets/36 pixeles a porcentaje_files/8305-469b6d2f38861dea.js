!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9239d537-6f40-48b3-a7ac-da314161dbab",e._sentryDebugIdIdentifier="sentry-dbid-9239d537-6f40-48b3-a7ac-da314161dbab")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8305],{57632:function(e,t){t.DF={prefix:"fab",iconName:"facebook",icon:[512,512,[62e3],"f09a","M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"]},t.ne=t.DF},91007:function(e,t){t.DF={prefix:"fab",iconName:"whatsapp",icon:[448,512,[],"f232","M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"]},t.VH=t.DF},75421:function(e,t){t.DF={prefix:"fab",iconName:"x-twitter",icon:[512,512,[],"e61b","M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"]},t.NC=t.DF},85002:function(e,t){t.DF={prefix:"far",iconName:"arrow-down",icon:[384,512,[8595],"f063","M174.6 472.6c4.5 4.7 10.8 7.4 17.4 7.4s12.8-2.7 17.4-7.4l168-176c9.2-9.6 8.8-24.8-.8-33.9s-24.8-8.8-33.9 .8L216 396.1 216 56c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 340.1L41.4 263.4c-9.2-9.6-24.3-9.9-33.9-.8s-9.9 24.3-.8 33.9l168 176z"]},t.r5=t.DF},56269:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var l="circle-stop",n=[62094,"stop-circle"],i="f28d",a="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm192-96H320c17.7 0 32 14.3 32 32V320c0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32V192c0-17.7 14.3-32 32-32z";t.definition={prefix:"far",iconName:l,icon:[512,512,n,i,a]},t.faCircleStop=t.definition,t.prefix="far",t.iconName=l,t.width=512,t.height=512,t.ligatures=n,t.unicode=i,t.svgPathData=a,t.aliases=n},44835:function(e,t){t.DF={prefix:"far",iconName:"clipboard-check",icon:[384,512,[],"f46c","M320 64H280h-9.6C263 27.5 230.7 0 192 0s-71 27.5-78.4 64H104 64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64zM80 112v24c0 13.3 10.7 24 24 24h88 88c13.3 0 24-10.7 24-24V112h16c8.8 0 16 7.2 16 16V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V128c0-8.8 7.2-16 16-16H80zm88-32a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zM289 267.6c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-89.7 89.7L129 287c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l53.3 53.3c4.5 4.5 10.6 7 17 7s12.5-2.5 17-7L289 267.6z"]},t.E9=t.DF},29658:function(e,t){t.DF={prefix:"far",iconName:"link",icon:[640,512,[128279,"chain"],"f0c1","M580.3 267.2c56.2-56.2 56.2-147.3 0-203.5C526.8 10.2 440.9 7.3 383.9 57.2l-6.1 5.4c-10 8.7-11 23.9-2.3 33.9s23.9 11 33.9 2.3l6.1-5.4c38-33.2 95.2-31.3 130.9 4.4c37.4 37.4 37.4 98.1 0 135.6L433.1 346.6c-37.4 37.4-98.2 37.4-135.6 0c-35.7-35.7-37.6-92.9-4.4-130.9l4.7-5.4c8.7-10 7.7-25.1-2.3-33.9s-25.1-7.7-33.9 2.3l-4.7 5.4c-49.8 57-46.9 142.9 6.6 196.4c56.2 56.2 147.3 56.2 203.5 0L580.3 267.2zM59.7 244.8C3.5 301 3.5 392.1 59.7 448.2c53.6 53.6 139.5 56.4 196.5 6.5l6.1-5.4c10-8.7 11-23.9 2.3-33.9s-23.9-11-33.9-2.3l-6.1 5.4c-38 33.2-95.2 31.3-130.9-4.4c-37.4-37.4-37.4-98.1 0-135.6L207 165.4c37.4-37.4 98.1-37.4 135.6 0c35.7 35.7 37.6 92.9 4.4 130.9l-5.4 6.1c-8.7 10-7.7 25.1 2.3 33.9s25.1 7.7 33.9-2.3l5.4-6.1c49.9-57 47-142.9-6.5-196.5c-56.2-56.2-147.3-56.2-203.5 0L59.7 244.8z"]},t.nN=t.DF},33542:function(e,t){t.DF={prefix:"far",iconName:"slash-forward",icon:[320,512,[],"2f","M308.1 3.3c11.4 6.7 15.3 21.4 8.6 32.8l-272 464c-6.7 11.4-21.4 15.3-32.8 8.6S-3.4 487.3 3.3 475.9l272-464C282 .4 296.7-3.4 308.1 3.3z"]},t.D2=t.DF},36:function(e,t,l){var n=l(56269);t.DF={prefix:n.prefix,iconName:n.iconName,icon:[n.width,n.height,n.aliases,n.unicode,n.svgPathData]},t.oD=t.DF,n.prefix,n.iconName,n.width,n.height,n.aliases,n.unicode,n.svgPathData,n.aliases},27668:function(e,t){t.DF={prefix:"far",iconName:"trash-clock",icon:[576,512,[],"e2b0","M177.1 48h93.7c2.7 0 5.2 1.3 6.7 3.6l19 28.4h-145l19-28.4c1.5-2.2 4-3.6 6.7-3.6zM354.2 80L317.5 24.9C307.1 9.4 289.6 0 270.9 0H177.1c-18.7 0-36.2 9.4-46.6 24.9L93.8 80H80.1 32 24C10.7 80 0 90.7 0 104s10.7 24 24 24H35.6L59.6 452.7c2.5 33.4 30.3 59.3 63.8 59.3H324.6c2 0 3.9-.1 5.8-.3c-18.2-12.9-33.8-29.1-45.9-47.7h-161c-8.4 0-15.3-6.5-16-14.8L83.7 128H364.3l-5.9 80.1c15.3-7.1 31.9-12 49.2-14.4l4.9-65.7H424c13.3 0 24-10.7 24-24s-10.7-24-24-24h-8H367.9 354.2zM576 368a144 144 0 1 0 -288 0 144 144 0 1 0 288 0zM432 288c8.8 0 16 7.2 16 16v48h32c8.8 0 16 7.2 16 16s-7.2 16-16 16H432c-8.8 0-16-7.2-16-16V304c0-8.8 7.2-16 16-16z"]},t.yZ=t.DF},21551:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var l="triangle-exclamation",n=[9888,"exclamation-triangle","warning"],i="f071",a="M248.4 84.3c1.6-2.7 4.5-4.3 7.6-4.3s6 1.6 7.6 4.3L461.9 410c1.4 2.3 2.1 4.9 2.1 7.5c0 8-6.5 14.5-14.5 14.5H62.5c-8 0-14.5-6.5-14.5-14.5c0-2.7 .7-5.3 2.1-7.5L248.4 84.3zm-41-25L9.1 385c-6 9.8-9.1 21-9.1 32.5C0 452 28 480 62.5 480h387c34.5 0 62.5-28 62.5-62.5c0-11.5-3.2-22.7-9.1-32.5L304.6 59.3C294.3 42.4 275.9 32 256 32s-38.3 10.4-48.6 27.3zM288 368a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm-8-184c0-13.3-10.7-24-24-24s-24 10.7-24 24v96c0 13.3 10.7 24 24 24s24-10.7 24-24V184z";t.definition={prefix:"far",iconName:l,icon:[512,512,n,i,a]},t.faTriangleExclamation=t.definition,t.prefix="far",t.iconName=l,t.width=512,t.height=512,t.ligatures=n,t.unicode=i,t.svgPathData=a,t.aliases=n},89598:function(e,t,l){var n=l(21551);t.DF={prefix:n.prefix,iconName:n.iconName,icon:[n.width,n.height,n.aliases,n.unicode,n.svgPathData]},t.e7=t.DF,n.prefix,n.iconName,n.width,n.height,n.aliases,n.unicode,n.svgPathData,n.aliases},13155:function(e,t){t.DF={prefix:"fas",iconName:"bookmark",icon:[384,512,[128278,61591],"f02e","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z"]},t.xV=t.DF},94994:function(e,t,l){l.d(t,{u:function(){return c}});var n=l(97458),i=l(9839),a=l(94568),o=l(97379),s=l(89782),r=l(67571);let c=e=>{var t,l,c;let d,u,m,{firstResult:h}=e;if(!h)return null;let x=(0,s.EH)(h);if(!x)return null;let f=null!==(l=h.s3_social_preview_url)&&void 0!==l?l:r.FO;(0,a.rZ)(h)&&(null===(t=h.article_info)||void 0===t?void 0:t.title)?(d=h.article_info.title,u=null==h?void 0:null===(c=h.article_info)||void 0===c?void 0:c.read_time,m=null==h?void 0:h.author_username):h.thread_title&&h.thread_title!==i.i?d=h.thread_title:h.query_str&&(d=h.query_str),d&&(d=(0,s.aF)(d,80));let p=x.answer?(0,s.aF)(x.answer,160):null;return(0,n.jsx)(o.y,{imageURL:f,title:d,description:p,readTime:u,datePublished:null==h?void 0:h.updated_datetime,author:m})}},10440:function(e,t,l){l.d(t,{j:function(){return eA}});var n=l(97458),i=l(52983),a=l(59842),o=l(31737),s=l(86231),r=l.n(s),c=l(14408),d=l(47532),u=l(53541),m=l(49237),h=l(48146),x=l(95712),f=l(61061),p=l(89540),v=l(96339),g=l(85002),b=l(46563),j=l(89782),k=l(25929),y=l(38474),C=l(51865),w=l.n(C),D=l(48740),U=l(12722),_=l(77837),N=l.n(_);let I=e=>{let{left:t,width:l,showStopButton:a,scrollToLatestEntry:s,showScrollButton:r,hasScrolled:c,setHasScrolled:C,existingFrontendContextUUID:_,moreThanOneResult:I,lastEntryUUID:T,isReadonly:M}=e,S=(0,o.useTranslations)("askInput"),F=(0,o.useTranslations)("shared"),L=(0,u.useSearchParams)(),z=null==L?void 0:L.get("q"),{submitQuery:Z}=(0,p.e)(),H=(0,u.useRouter)(),P=(0,x.lG)(),E=(0,f.nO)(),{data:R}=(0,d.useSession)(),{inFlight:O}=(0,v.a0)(),{isMobileStyle:A}=(0,b.d)(),B=(0,i.useCallback)(e=>{let t=(0,j.Mp)();if(Z({fork:M,rawQuery:e.query,copilotOverride:!!P&&void 0,attachments:e.attachments,collection:null,newFrontendContextUUID:M?t:null,existingFrontendContextUUID:M?null:_,promptSource:"user",querySource:"followup",timeFromFirstType:e.timeFromFirstType}),M){let e=new URLSearchParams({q:"pending",newFrontendContextUUID:t}),l=new URL(window.location.href);l.pathname="search",l.search=e.toString();let n=l.toString();H.push(n)}},[M,Z,P,_,H]),{setUserInput:V,...G}=(0,h.l)({clearInputOnSubmit:!0,onSubmit:N()(B,1e3,{leading:!0})}),q=(0,i.useCallback)(()=>{null==E||E.emit("perplexity_terminate",{entry_uuid:T})},[T,E]);return((0,i.useEffect)(()=>{""!=z&&V("")},[z,V]),t<=0)?null:(0,n.jsx)(k.ZP,{style:{left:A?"0px":"".concat(t,"px"),width:A?"100%":"".concat(l,"px")},className:w()("pointer-events-none fixed z-10 grid-cols-12 gap-xl px-sm py-sm md:bottom-lg md:grid md:px-0",{"bottom-mobileNavHeight":R,"bottom-safeAreaInsetBottom":!R}),children:(0,n.jsxs)("div",{className:"pointer-events-auto md:col-span-8",children:[(0,n.jsx)(D.M,{initial:!1,children:r&&!c&&I&&(0,n.jsx)(U.E.div,{className:"mb-2 flex justify-center",initial:{opacity:0,y:5},animate:{opacity:1,y:0,transition:{delay:1,duration:.15,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.1,ease:"easeOut"}},children:(0,n.jsx)("div",{className:"inline-flex rounded-full bg-offset shadow-md dark:bg-offsetDark",children:(0,n.jsx)(y.Z,{size:"small",variant:"common",icon:g.r5,layout:"center",pill:!0,onClick:()=>{s(),C(!0)},toolTip:F("scrollToBottom")})})})}),(0,n.jsx)(m.m,{...G,isFollowUp:!0,disabled:O,placeholder:A&&O?"":S("placeholderFollowUp"),submitWillFork:M,showStopButton:a,onStopButtonClick:q})]})})};var T=l(4403),M=l(6139),S=l(53999),F=l(55814),L=l(40267),z=l(6941),Z=l(80973),H=l(12258),P=l(94994),E=l(23915),R=l(820),O=l(24819),A=l.n(O),B=l(70261),V=l(94589),G=l(7871),q=l(99407),W=l(11556),J=l(84981),K=e=>{let{currentCollection:t,size:l,handleCollectionChange:i,viewOnly:a}=e,s=(0,o.useTranslations)("shared");if(a&&!t)return null;let r=(0,n.jsxs)(W.Z,{variant:"small"===l?"tiny":"smallBold",color:"light",className:"flex cursor-pointer select-none items-center gap-x-xs px-sm py-xs transition duration-300 hover:opacity-70",children:[(0,n.jsx)(R.G,{icon:q.r8}),(0,n.jsx)("span",{className:"whitespace-nowrap",children:s("collection")})]});return(0,n.jsx)("div",{children:t?t?(0,n.jsx)(A(),{href:"/collections/".concat(t.slug),children:(0,n.jsxs)(W.Z,{variant:"small"===l?"tiny":"smallBold",className:"flex cursor-pointer select-none items-center gap-x-xs px-sm py-xs transition duration-300 hover:opacity-70",children:[(0,J.Nl)(t.user_permission)?(0,n.jsx)(R.G,{icon:G.xV,className:"mr-xs text-textMain",size:"sm"}):(0,n.jsx)(V.B,{unified:t.emoji,size:"tiny"}),(0,n.jsx)("span",{className:"overflow-hidden truncate text-ellipsis",children:(0,B.Y)(t,s)})]})}):null:(0,n.jsx)("div",{onClick:a?void 0:i,children:r})})},X=l(86634),Y=l(28492),Q=l(41275),$=l(92093),ee=l(5299),et=l(45233),el=l(64038),en=l(96049),ei=l(1809),ea=l(38213),eo=l(82122),es=l(8245),er=l(22381),ec=l(27668);function ed(e){let{utcTimestamp:t}=e,l=function(e){let t=(0,o.useTranslations)("threads.entry.expiration"),l=+new Date,n=(0,i.useMemo)(()=>+new Date(e+"Z"),[e])-l;return n<0?null:n>864e5?t("expiresInDays",{days:Math.floor(n/864e5)}):n>36e5?t("expiresInHours",{hours:Math.floor(n/36e5)}):t("expiresInMinutes",n>6e4?{minutes:Math.floor(n/6e4)}:{minutes:1})}(t);return l?(0,n.jsxs)(W.Z,{variant:"tiny",color:"light",className:"flex cursor-default items-center gap-x-xs",children:[(0,n.jsx)(R.G,{icon:ec.yZ}),(0,n.jsx)("span",{className:"truncate",suppressHydrationWarning:!0,children:l})]}):null}var eu=l(19381),em=l(51253),eh=l(49544),ex=()=>{let{firstResult:e,socialStats:t}=(0,v.a0)();if(!(null==e?void 0:e.backend_uuid))return null;let l=t&&t.viewCount>0,i=t&&t.forkCount>0;return l||i?(0,n.jsxs)(k.ZP,{className:"flex items-center gap-x-sm",children:[l&&(0,n.jsxs)(W.Z,{variant:"tiny",color:"light",className:"flex items-center gap-x-xs",children:[(0,n.jsx)(R.G,{size:"sm",fixedWidth:!0,icon:eh.Md}),(0,n.jsx)("div",{children:(0,j.uf)(t.viewCount)})]}),i&&(0,n.jsxs)(W.Z,{variant:"tiny",color:"light",className:"flex items-center gap-x-xs",children:[(0,n.jsx)(R.G,{size:"sm",fixedWidth:!0,icon:em.MD}),(0,n.jsx)("div",{children:(0,j.uf)(t.forkCount)})]})]}):null},ef=l(96299);let ep=r()(()=>Promise.all([l.e(9402),l.e(9974),l.e(7094),l.e(6391),l.e(1987),l.e(1788),l.e(4780),l.e(2483),l.e(1912),l.e(6474),l.e(5559),l.e(5201)]).then(l.bind(l,55559)).then(e=>e.TimeAgoTooltip),{loadableGenerated:{webpack:()=>[55559]},ssr:!1}),ev=i.memo(e=>{let{focus:t,authorUsername:l,threadAccess:i,authorImage:a}=e,{threadMetadata:o}=(0,v.a0)(),s=!l,r=(0,es.k)(),{locale:c}=(0,eo.z)();return(0,n.jsxs)("div",{className:"flex items-center gap-x-md",children:[!s&&(0,n.jsx)(k.ZP,{className:"hidden rounded-full md:block",children:(0,n.jsx)(er.Z,{image:null!=a?a:void 0,username:null!=l?l:void 0,showAvatar:!0,showCreatorLabel:!1,showEdit:!1,isCurrentUser:!1})}),null!==t&&"internet"!==t&&(0,n.jsx)(k.ZP,{className:"hidden rounded-full md:block",children:(0,n.jsx)(eu.Z,{textVariant:"smallBold",focus:t})}),!s&&(null!=i?i:0)>=ef.uv.PUBLIC_READ&&(0,n.jsx)("div",{className:"hidden md:block",children:(0,n.jsx)(ex,{})}),o.expiry_time?(0,n.jsx)("div",{className:"hidden md:block",children:(0,n.jsx)(ed,{utcTimestamp:o.expiry_time})}):(0,n.jsx)("div",{className:"hidden md:block",children:(0,n.jsx)(ep,{timestamp:o.updated_datetime,layoutType:"bottom",translations:r,style:"narrow",locale:c})})]})});var eg=l(46590),eb=l(81993),ej=l(4030),ek=l(39294),ey=l(46402),eC=l(40236),ew=l(1845),eD=l(67571),eU=l(76022);let e_=i.memo(e=>{var t;let{descriptionText:l,sharableURL:i}=e,{openModal:a}=(0,ei.X)(),s=(0,ew.f)(),r=(0,x.lG)(),c=(0,eb.NL)(),{threadMetadata:d}=(0,v.a0)(),u=d.rwToken,m=d.frontendContextUUID,h=d.contextUUID,f=d.collection,p=null!==(t=d.thread_access)&&void 0!==t?t:eD.k6,g=(0,ek.O)(),b=(0,o.useTranslations)("search.thread"),j=(0,o.useTranslations)("shared"),k=e=>{e!==p&&(r?null!=h&&null!=u&&g(h,e,u,e=>{c.setQueryData(["results",{frontend_context_uuid:m}],t=>{if(!t)return;let[l,...n]=t;return[{...l,thread_access:e},...n]})}):a("loginModal",{pitchMessage:{title:b("shareLogin",{threads:"Threads"}),description:b("shareDescription",{threads:"Threads",collections:"Collections"})},origin:ef.FM.SHARE_DROPDOWN}))},y=(0,eC.o)({currentAccessLevel:p,onClick:k,isCollection:!1}),C=y[p],w=p>ef.uv.PRIVATE_READ;null!=f&&(0,B.Y)(f,j),y[null==f?void 0:f.access];let D=(0,n.jsxs)("div",{className:"p-sm",children:[null!=u&&(0,n.jsxs)("div",{children:[(0,n.jsx)(W.Z,{variant:"baseSemi",children:b("viewAccess")}),(0,n.jsx)(eU.Z,{choices:y})]}),(0,n.jsx)(ej.Z,{descriptionText:l,shareHref:i,isSharable:w,maybeContextUUID:d.contextUUID,hasMounted:s,icon:null==C?void 0:C.icon})]});return(0,n.jsx)(ey.Z,{isSharable:w,hasMounted:s,shareHref:i,EditorDropDownContent:D,icon:null==C?void 0:C.icon,onClick:()=>k(ef.uv.PUBLIC_READ),maybeContextUUID:d.contextUUID})}),eN=i.memo(e=>{let{visible:t,tweetDescriptionText:l,threadSharedSlug:a}=e,o=(0,ew.f)(),[s,r]=(0,i.useState)("");(0,i.useEffect)(()=>{let{protocol:e,host:t}=window.location;r("".concat(e,"//").concat(t,"/search/").concat(a))},[a]);let c=(0,i.useMemo)(()=>encodeURIComponent(o?(0,j.RP)(decodeURIComponent(s)):""),[s,o]),d=(0,i.useMemo)(()=>null!=l?"Perplexity AI: ".concat(l):"Perplexity AI",[l]),u=(0,i.useMemo)(()=>w()("transition-all duration-300 opacity flex items-center gap-x-xs md:gap-x-0",{"opacity-0":!t,"opacity-100":t}),[t]);return(0,n.jsx)("div",{className:u,children:t&&(0,n.jsx)(e_,{descriptionText:d,sharableURL:c})})});var eI=l(9839),eT=l(80937),eM=l(21139),eS=l(33542),eF=l(13155),eL=l(24121);let ez=i.memo(e=>{var t,l,a,s,r;let{entryUUID:c,frontendContextUUID:d,collection:m,bookmarkState:h,isFirstResultPending:f}=e,[p,g]=(0,i.useState)(!1),C=(0,u.useRouter)(),w=(0,ew.f)(),D=(0,x.lG)(),{collections:U}=(0,ee.l)(),_=(0,S.p)(),{searchTerm:N}=(0,ea.p)(),I=(0,$.J)(),{deleteThread:T}=(0,et.l)(),{openModal:M,closeModal:L}=(0,ei.X)(),{refetch:z,addItemToSidebar:Z}=(0,el.f)(),{removeThreadFromCollection:H,swapThreadCollection:P,firstTimeBookmark:E}=(0,Q.Fb)(),{isLoading:O,threadMetadata:A}=(0,v.a0)(),{trackEvent:B}=(0,F.WS)(),V=(0,o.useTranslations)("search.thread"),q=(0,o.useTranslations)("threadItem"),eo=(0,o.useTranslations)("article"),es=(0,o.useTranslations)("shared"),{allowArticleCreation:er}=(0,en.v)(),{isMobileStyle:ec}=(0,b.d)(),ed=A.privacy_state===ef.Jr.INCOGNITO,eu="BOOKMARKED"===h;(0,i.useEffect)(()=>{let e=A.title||A.first_query,t=A.thread_url_slug;_&&w&&e&&t&&!ed&&(Z({id:c,variant:"thread",title:e,permalink:"/search/".concat(t,"?newFrontendContextUUID=").concat(d)}),z())},[A,_,w,d,c,Z,z,ed]);let{checkShouldOpenLossAversion:em,handleOpenLossAversion:eh}=(0,eg.GK)(),ex=(0,i.useCallback)(()=>{em()?eh({args:{origin:ef.FM.NEW_THREAD_BUTTON}}):C.push("/")},[em,eh,C]),ep=(0,i.useCallback)(()=>{B("click back button",{}),ex()},[ex,B]),eb=(0,i.useCallback)(()=>{B("click logo",{}),ex()},[ex,B]),ej=(0,i.useCallback)(()=>{c&&(B("delete thread from search result page click",{entryUUID:c}),T({entryUUID:c,callback:()=>C.push("/")}))},[T,c,C,B]),ek=(0,i.useCallback)(()=>{if(eu||!c)return;B("click add thread to collection",{contextUUID:A.contextUUID,isBookmark:!0});let e=U.find(e=>(0,J.Nl)(e.user_permission));if(void 0===e)E({entryUUID:c,frontendContextUUID:d});else{var t;P({entryUUID:c,newCollectionTitle:e.title,newCollectionUUID:e.uuid,newCollectionSlug:e.slug,newCollectionAccess:e.access,frontendContextUUID:d,newCollectionEmoji:null!==(t=e.emoji)&&void 0!==t?t:null,currentCollectionUUID:null,existingCollectionSlug:null,closeModal:()=>{}})}},[eu,A.contextUUID,c,U,m,d]),ey=(0,i.useCallback)(e=>{if("add"===e?B("click add thread to collection",{contextUUID:A.contextUUID,isBookmark:!1}):B("click swap thread collection",{contextUUID:A.contextUUID,isFromBookmark:!!m&&(0,J.Nl)(m.user_permission),collectionUUID:null==m?void 0:m.uuid}),D){if(0===U.length)I.listUserCollections(e=>{if(0===e.length)M("collectionCreateOrEdit",{frontendContextUUID:d,existingCollection:null,searchTerm:N});else{var t;M("collectionSelectModal",{entryUUID:c,userCollections:e,currentCollection:m,searchTerm:null!==(t=A.first_query)&&void 0!==t?t:"",frontendContextUUID:d})}});else{var t;M("collectionSelectModal",{entryUUID:c,userCollections:U,currentCollection:m,searchTerm:null!==(t=A.first_query)&&void 0!==t?t:"",frontendContextUUID:d})}}else M("loginModal",{pitchMessage:{title:V("headerLogin",{threads:"Threads"})},origin:ef.FM.COLLECTIONS})},[m,A.contextUUID,I,c,d,D,M,N,V,A.first_query,U]),eC=(0,i.useCallback)(()=>{if(D){g(!0);let e=(0,j.Mp)();B("click convert thread to page",{oldContextUUID:A.contextUUID,newFrontendContextUUID:e});let t=new URLSearchParams({newFrontendContextUUID:e,existingResultsCacheUUID:d,existingContextBackendUUID:A.contextUUID}),l=new URL(window.location.href);l.pathname="page/new",l.search=t.toString();let n=l.toString();C.push(n)}else M("loginModal",{pitchMessage:{title:eo("loginPrompt",{page:"Page"})},origin:ef.FM.THREAD_TO_ARTICLE})},[B,D,M,eo,C,d,A.contextUUID,g]),eD=e=>{var t;if(!m||!c)return;let l=m.uuid;B("click remove thread from collection",{contextUUID:null===(t=A.collection)||void 0===t?void 0:t.uuid,collectionUUID:l,isBookmark:"remove bookmark"===e}),H({entryUUID:c,oldCollectionUUID:l,callback:L,frontendContextUUID:d})},eU=(!!_&&D||null!=m)&&!ed,e_=(!!_&&D||A.title!=eI.i&&null!=A.title)&&!ed,ez=eU&&e_,eZ=er&&!ec&&!f&&!ed,eH=!f&&!ed&&D,eP=ec&&!f,eE=(0,n.jsx)(y.Z,{icon:eu?eF.xV:G.xV,size:"small",variant:ec?"common":"border",toolTip:es(eu?"savedToBookmarks":"saveToBookmarks"),onClick:eu?()=>eD("remove bookmark"):ek});return(0,n.jsx)(k.ZP,{variant:"background",className:"sticky left-0 right-0 top-0 z-20 border-b md:mb-0 md:rounded-t-xl",children:(0,n.jsxs)("div",{className:"flex items-center justify-between gap-x-md px-md py-sm md:min-h-[53px]",children:[(0,n.jsxs)("div",{className:"flex items-center gap-x-sm md:hidden",children:[(0,n.jsx)(eL.Z,{onClick:eb,size:"small",variant:"mark"}),(0,n.jsx)(y.Z,{variant:"common",size:"small",text:es("new"),icon:eT.faPlus,onClick:ep})]}),(0,n.jsx)("div",{children:!O&&(0,n.jsx)(ev,{focus:null!==(t=A.focus)&&void 0!==t?t:null,authorUsername:null!==(l=A.author_username)&&void 0!==l?l:null,threadAccess:null!==(a=A.thread_access)&&void 0!==a?a:0,authorImage:null!==(s=A.author_image)&&void 0!==s?s:null,expiryTime:A.expiry_time})}),(0,n.jsxs)("div",{className:"hidden max-w-md grow items-center justify-center gap-x-xs text-center md:flex",children:[eU&&(0,n.jsx)(K,{currentCollection:m,handleCollectionChange:()=>ey("add"),viewOnly:!D||!_}),ez&&(0,n.jsx)(W.Z,{variant:"smallBold",color:"light",children:(0,n.jsx)(R.G,{icon:eS.D2})}),e_&&(0,n.jsx)(eI.Z,{title:A.title||A.first_query,contextUUID:A.contextUUID,rwToken:_,frontendContextUUID:d})]}),(0,n.jsxs)("div",{className:"flex items-center gap-x-sm",children:[(0,n.jsxs)("div",{className:"flex items-center gap-sm",children:[(0,n.jsx)(X.Z,{show:w&&!f&&D,isBookmarked:eu,onDelete:ej,onAddToCollection:()=>ey("add"),onSwapCollection:()=>ey("swap"),onRemoveFromCollection:()=>eD("remove"),currentCollection:m,rwToken:_,type:ed?Y.W.INCOGNITO_SEARCH:Y.W.SEARCH}),eH&&!ec&&eE,eZ&&(0,n.jsx)(y.Z,{text:q("convertThreadtoArticle"),size:"small",icon:eM.a_,onClick:eC,testId:"thread-article-create",variant:"border",isLoading:p,disabled:p})]}),eP&&(0,n.jsx)(y.Z,{size:"small",variant:"primary",text:"Open in App",href:"/download-mobile",onClick:()=>{B("clicked open in app button in mweb thread header",{})}}),eH&&ec&&eE,(0,n.jsx)(eN,{visible:!!A.thread_url_slug,tweetDescriptionText:A.title||A.first_query,threadSharedSlug:null!==(r=A.thread_url_slug)&&void 0!==r?r:void 0})]})]})})});var eZ=l(94568),eH=e=>{var t,l,i,a;let{parentInfo:s}=e,r=(0,o.useTranslations)("threadItem"),c="article"===s.mode?"page":"search",d="";return(0,eZ.rZ)(s)&&(null===(t=s.article_info)||void 0===t?void 0:t.title)?d=null!==(i=null===(l=s.article_info)||void 0===l?void 0:l.title)&&void 0!==i?i:"":"query_str"in s&&(d=null!==(a=s.query_str)&&void 0!==a?a:""),(0,n.jsx)(A(),{href:"/".concat(c,"/").concat(s.thread_url_slug),children:(0,n.jsx)(k.ZP,{variant:"offset",bgHover:"offsetPlus",className:"flex justify-between rounded-lg p-md md:mt-md",children:(0,n.jsxs)("div",{className:"",children:[(0,n.jsxs)(W.Z,{color:"light",variant:"tiny",className:"mb-xs flex items-center gap-x-xs",children:[(0,n.jsx)(R.G,{icon:em.MD}),(0,n.jsx)("div",{children:r("followupTo")})]}),(0,n.jsx)(W.Z,{variant:"section-title",color:"light",className:"line-clamp-1 break-all",children:d})]})})})},eP=l(7152),eE=l(46944);let eR=r()({loader:()=>l.e(6669).then(l.bind(l,96669)),ssr:!1},{loadableGenerated:{webpack:()=>[96669]}}),eO=r()({loader:()=>l.e(2923).then(l.bind(l,22923)),ssr:!1},{loadableGenerated:{webpack:()=>[22923]}}),eA=e=>{var t,l,s,r,d,u,m,h;let{}=e,f=(0,S.p)(),g=(0,z.X)(),[y,{left:C,width:D}]=(0,a.Z)(),{trackEvent:U}=(0,F.WS)(),{thread:_,inFlight:N,inFlightLatest:R,lastResult:O,threadMetadata:A}=(0,v.a0)(),B=null!==(r=null===(t=_[0])||void 0===t?void 0:t.frontend_context_uuid)&&void 0!==r?r:"",V=(0,x.lG)(),{isMobileStyle:G}=(0,b.d)(),{isIncognito:q}=(0,Z.Y)(),{lossAversionStatus:W,setLossAversionStatus:J,unsetLossAversion:K}=(0,eg.JK)(),{submitQuery:X,handleBotStep:Y,deleteLastResult:Q}=(0,p.e)(),$=(0,o.useTranslations)("search.thread"),{setFocus:ee,focus:et,isCopilot:el,setIsCopilot:en,gpt4Limit:ei}=(0,H.h)();(0,i.useEffect)(()=>{var e,t;ee(null!==(t=null===(e=_[0])||void 0===e?void 0:e.search_focus)&&void 0!==t?t:"internet"),en(_.some(e=>"copilot"===e.mode)&&!!ei&&ei>0)},[]),(0,i.useEffect)(()=>{var e;ee(null!==(e=A.focus)&&void 0!==e?e:et)},[A.focus]);let ea=(null==A?void 0:A.privacy_state)&&(q&&A.privacy_state!==ef.Jr.INCOGNITO||!q&&A.privacy_state===ef.Jr.INCOGNITO),eo=(0,i.useMemo)(()=>!!(!f&&(0,j.vl)(_)||ea),[_,f,ea]),es=0===_.length||N,er=null!==(d=null==O?void 0:O.backend_uuid)&&void 0!==d?d:"",ec=(null==_?void 0:null===(l=_[0])||void 0===l?void 0:l.status)==="pending",ed=(0,i.useCallback)(e=>{X(e)},[X]),eu=(0,i.useCallback)(e=>{X(e)},[X]),{refs:em,scrollToLatestItem:eh,showScrollButton:ex,hasScrolled:ep,setHasScrolled:ev,scrollToListItem:eb}=(0,L.$)({items:_,inFlight:N,inFlightLatest:R,rwToken:f}),ej=(0,i.useCallback)(e=>{eb(e.existingEntryUUID,!0),X(e)},[eb,X]),ek=(0,i.useMemo)(()=>{var e,t;let l=(0,M.c)(null!==(t=null==O?void 0:O.text)&&void 0!==t?t:""),n=el&&(null===(e=l[l.length-1])||void 0===e?void 0:e.step_type)==="FINAL",i=!el&&null!=O&&!!O.text&&JSON.parse(O.text).answer;return _&&(n||i)&&(null==O?void 0:O.status)!=="completed"&&(null==O?void 0:O.backend_uuid)!==void 0&&N},[_,el,null==O?void 0:O.text,null==O?void 0:O.status,null==O?void 0:O.backend_uuid,N]);return(0,i.useEffect)(()=>{(null==_?void 0:_.length)>=1&&(null==O?void 0:O.status)==="completed"&&U("thread viewed",{authorId:A.author_id,authorUsername:A.author_username,isThreadCreator:!!f})},[U]),(0,i.useEffect)(()=>{"cooldown"!==W&&(V||W||!f?f||K():J("allowed"))},[V,W,f,J,K]),(0,eE.kw)(()=>{"allowed"===W&&K()}),(0,n.jsxs)(c.VY,{mobileHeader:!1,childrenWidth:"large",header:(0,n.jsx)(ez,{collection:null!==(u=A.collection)&&void 0!==u?u:null,bookmarkState:null!==(m=A.bookmarkState)&&void 0!==m?m:null,entryUUID:null!==(h=null===(s=_[0])||void 0===s?void 0:s.backend_uuid)&&void 0!==h?h:null,frontendContextUUID:B,isFirstResultPending:ec}),children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(P.u,{firstResult:N?null:_[0]}),(0,n.jsx)("div",{className:w()("pt-md md:pb-[124px] md:pt-0",{"pb-[144px]":V}),children:(0,n.jsxs)(k.ZP,{variant:"background",className:"relative",children:[A.parent_info&&(0,n.jsx)(eH,{parentInfo:A.parent_info}),(0,n.jsx)("div",{ref:y,children:_.map((e,t)=>{var l,a,o;let s=0===t,r=t===_.length-1;return(0,n.jsx)(i.Fragment,{children:(0,n.jsx)(T.Z,{fallback:(0,n.jsx)("div",{className:"grid grid-cols-12",children:(0,n.jsx)(eP.o,{className:"col-span-full md:col-span-8",description:null!==(l=null==e?void 0:e.text)&&void 0!==l?l:$("errorDescription"),title:$("error")})}),children:(0,n.jsx)("div",{ref:em[t],children:(0,n.jsx)(E.default,{idx:t,result:e,inFlight:N,isReadonly:eo,showAnimations:es&&r,submit:ej,onRelatedButtonClick:ed,onTextSelectClick:eu,isLastResult:r,isFirstResult:s,onBotStep:t=>Y(e,t),showSurvey:!!g,deleteLast:r&&1!==_.length?()=>{var e;return Q({frontendContextUUID:null===(e=_[0])||void 0===e?void 0:e.frontend_context_uuid})}:void 0})},null==e?void 0:e.backend_uuid)})},null!==(o=null!==(a=null==e?void 0:e.uuid)&&void 0!==a?a:null==e?void 0:e.backend_uuid)&&void 0!==o?o:t)})}),(0,n.jsx)(I,{left:C,width:D,lastEntryUUID:er,showStopButton:ek,scrollToLatestEntry:eh,showScrollButton:ex,hasScrolled:ep,setHasScrolled:ev,existingFrontendContextUUID:B,moreThanOneResult:_.length>1,isReadonly:eo})]})})]}),(0,n.jsxs)("div",{className:"md:hidden",children:[(0,n.jsx)(eR,{className:"mb-mobileNavHeight",havePrimaryButton:!1}),!N&&G&&(0,n.jsx)(eO,{})]})]})}},6941:function(e,t,l){l.d(t,{X:function(){return i}});var n=l(53541);function i(){let e=(0,n.useSearchParams)(),t=null==e?void 0:e.get("pplx-show-survey");return"edu"===t||"plus"===t||"default"===t||"copilot"===t?t:null}},76022:function(e,t,l){var n=l(97458);l(52983);var i=l(25929),a=l(1326);t.Z=e=>{let{choices:t,...l}=e;return(0,n.jsx)(i.ZP,{className:"mt-sm divide-y rounded md:border",...l,children:t.map((e,t)=>(0,n.jsx)(a.s,{rounded:!1,...e},t))})}},7152:function(e,t,l){l.d(t,{o:function(){return c}});var n=l(97458),i=l(89598),a=l(820),o=l(52983);let s=e=>{try{return JSON.parse(e)}catch(e){return null}},r="Please try again later.",c=o.memo(e=>{let{title:t="Sorry, something went wrong.",description:l=r,className:c="",role:d,...u}=e,m=(0,o.useMemo)(()=>s(l),[l]);return m&&(l=r,console.warn("Tried to pass a JSON error description"),console.warn(m)),(0,n.jsxs)("div",{className:"bg-background-super-alt p-md gap-md mt-4 flex items-center rounded-lg text-left font-sans text-white ".concat(c),role:"alert",...u,children:[(0,n.jsx)(a.G,{className:"text-3xl",icon:i.e7}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("p",{className:"font-semibold",children:t}),(0,n.jsx)("p",{children:l})]})]})})}}]);