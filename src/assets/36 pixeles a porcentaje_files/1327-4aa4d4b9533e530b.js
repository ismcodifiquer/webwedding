!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e20c473e-6dc2-4698-90d9-4dc2da819c11",e._sentryDebugIdIdentifier="sentry-dbid-e20c473e-6dc2-4698-90d9-4dc2da819c11")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1327],{49237:function(e,t,n){n.d(t,{m:function(){return k}});var o=n(97458),l=n(52983),i=n(31737),s=n(1809),a=n(41289),c=n(36),r=n(46563),d=n(25929),u=n(38474),h=n(30706),m=n(12722),p=n(74334),f=n(48740);let k=l.memo(e=>{let{showStopButton:t,onStopButtonClick:n,...k}=e,{currentOpenedModal:b}=(0,s.X)(),{isMobileUserAgent:v}=(0,r.d)(),x=(0,i.useTranslations)("main.askInput"),w=(0,l.useCallback)(e=>{"Escape"===e.key&&t&&n&&null===b&&(e.preventDefault(),n())},[n,t,b]);return(0,l.useEffect)(()=>(document.addEventListener("keydown",w),()=>{document.removeEventListener("keydown",w)}),[w]),(0,o.jsx)(d.ZP,{className:"w-full",children:(0,o.jsx)(h.A,{transition:{duration:.2,bounce:.2,type:"spring"},children:(0,o.jsx)(m.E.div,{layout:!0,layoutRoot:!0,className:"flex items-center gap-x-xs",children:(0,o.jsx)(p.S,{children:(0,o.jsxs)(f.M,{mode:"popLayout",initial:!1,children:[t&&(0,o.jsx)(m.E.div,{initial:{scale:.2,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.2,opacity:0},children:(0,o.jsx)(u.Z,{toolTip:x("stopGenerating"),variant:"rejecter",pill:!0,icon:c.oD,keyboardShortcut:["Esc"],onClick:n})},"stop-button"),(0,o.jsx)(m.E.div,{layout:!0,className:"grow",children:(0,o.jsx)(a.Z,{borderClass:"md:p-sm bg-offset dark:bg-offsetDark",hasShadow:!0,showFileUpload:!0,showCopilotToggle:!0,autofocus:null===b&&!v,querySource:k.submitWillFork?"fork":"followup",...k})},"ask-input")]})})})})})})},25807:function(e,t,n){var o=n(97458),l=n(52983),i=n(62309),s=n(29658),a=n(89782),c=n(38474);t.Z=e=>{let{shareHref:t,hasMounted:n,isSharable:r,maybeContextUUID:d,...u}=e,{trackEvent:h}=(0,i.h)(),m=(0,l.useCallback)(()=>{navigator.clipboard.writeText(n?(0,a.RP)(decodeURIComponent(t)):""),h("click copy link button",{contextUUID:d})},[t,n,h]);return r?(0,o.jsx)(c.Z,{clickFeedback:!0,size:"small",onClick:m,toolTip:"Copy Link",tooltipLayout:"bottom",icon:s.nN,variant:"primary",...u}):null}},46402:function(e,t,n){var o=n(97458),l=n(52983),i=n(31737),s=n(25807),a=n(46563),c=n(4514),r=n(5658),d=n(38474);t.Z=e=>{let{isSharable:t,hasMounted:n,shareHref:u,EditorDropDownContent:h,icon:m,onClick:p,maybeContextUUID:f}=e,{isMobileStyle:k}=(0,a.d)(),{isMacOS:b}=(0,c.Fy)(),[v,x]=(0,l.useState)(!1),w=(0,i.useTranslations)("shared"),y=(0,l.useCallback)(()=>{null==p||p(),x(e=>!e)},[p,x]),g=(0,l.useCallback)(e=>{(b?e.metaKey&&e.shiftKey&&"c"===e.key:e.ctrlKey&&e.shiftKey&&"c"===e.key)&&(e.preventDefault(),y())},[b,y]);return((0,l.useEffect)(()=>(document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}),[g]),n)?(0,o.jsxs)("div",{className:"flex items-center gap-x-sm",children:[!k&&(0,o.jsx)(s.Z,{shareHref:u,hasMounted:n,isSharable:t,maybeContextUUID:f}),(0,o.jsx)(r.p,{content:h,placement:"bottom-end",isMobileStyle:k,onClose:()=>x(!1),isOpen:v,children:(0,o.jsx)(d.Z,{onClick:y,variant:k?"common":"primary",size:"small",text:k?void 0:w("share"),icon:m})})]}):null}},4030:function(e,t,n){var o=n(97458),l=n(820),i=n(52983),s=n(31737),a=n(62309),c=n(57632),r=n(91007),d=n(75421),u=n(44835),h=n(29658),m=n(89782),p=n(11556),f=n(38474);t.Z=e=>{let{descriptionText:t,shareHref:n,isSharable:k,maybeContextUUID:b,hasMounted:v,icon:x}=e,w=encodeURIComponent(t),{trackEvent:y}=(0,a.h)(),g=(0,s.useTranslations)("socialShare"),C=(0,s.useTranslations)("shared"),j=(0,i.useMemo)(()=>"https://twitter.com/intent/tweet?text=".concat(w,"&url=").concat(n),[w,n]),E=(0,i.useMemo)(()=>"https://api.whatsapp.com/send?text=".concat(w,"%20").concat(n),[w,n]),N=(0,i.useMemo)(()=>"https://www.facebook.com/sharer/sharer.php?u=".concat(n,"&quote=").concat(w),[w,n]),I=(0,i.useCallback)(()=>{document.hasFocus&&(navigator.clipboard.writeText(v?(0,m.RP)(decodeURIComponent(n)):""),y("click copy link button",{contextUUID:b}))},[n,v,y]),S=(0,i.useCallback)(()=>{var e;if(!(null===(e=navigator)||void 0===e?void 0:e.share)){window.open(j,"_blank");return}navigator.share({text:"".concat(t," ").concat(v?(0,m.RP)(decodeURIComponent(n)):""),title:"Perplexity AI"}),y("click mobile native share button",{})},[n,j,t,v,y]),_=[{text:"Twitter",icon:d.NC,target:"_blank",href:j,onClick:()=>y("click tweet button",{})},{text:g("copyLink"),clickFeedback:!0,icon:h.nN,onClick:I},{text:"WhatsApp",icon:r.VH,target:"_blank",href:E,onClick:()=>y("click whatsapp button",{})},{text:"Facebook",icon:c.ne,target:"_blank",href:N,onClick:()=>y("click facebook button",{})}];return((0,i.useEffect)(()=>{v&&k&&I()},[v,k,I]),v&&k)?(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"mt-sm",children:(0,o.jsxs)(p.Z,{variant:"tiny",color:"super",children:[(0,o.jsx)(l.G,{icon:u.E9,className:"mr-xs"}),(0,o.jsx)("span",{children:g("linkCopied")})]})}),(0,o.jsxs)("div",{className:"hidden md:block",children:[(0,o.jsx)(p.Z,{variant:"baseSemi",className:"mb-sm mt-md",children:C("share")}),(0,o.jsx)("div",{className:"grid grid-cols-2 gap-xs",children:_.map(e=>(0,o.jsx)("div",{children:(0,o.jsx)(f.Z,{layout:"left",size:"small",fullWidth:!0,...e})},e.text))})]}),(0,o.jsx)("div",{className:"block md:hidden",children:(0,o.jsx)("div",{className:"mt-md",children:(0,o.jsx)(f.Z,{variant:"primary",fullWidth:!0,text:C("share"),target:"_blank",icon:x,onClick:S})})})]}):null}},40267:function(e,t,n){n.d(t,{$:function(){return a}});var o=n(52983),l=n(1845),i=n(77837),s=n.n(i);let a=e=>{let{items:t,inFlight:n,inFlightLatest:i,rwToken:a,headerOffset:c=52}=e,[r,d]=(0,o.useState)(!1),[u,h]=(0,o.useState)(!1),m=(0,l.f)(),p=(0,o.useRef)(!0),f=(0,o.useMemo)(()=>!a&&t.every(e=>"pending"!==e.status),[t,a]),k=(0,o.useMemo)(()=>t.some(e=>"pending"===e.status),[t]),[b,v]=(0,o.useState)({}),[x,w]=(0,o.useState)({}),y=(0,o.useCallback)(function(e){var t,n;let o=!(arguments.length>1)||void 0===arguments[1]||arguments[1],l="number"==typeof e?null===(t=b[e])||void 0===t?void 0:t.current:null===(n=x[e])||void 0===n?void 0:n.current;if(l){let e=l.getBoundingClientRect().top+window.scrollY-c;window.scrollTo({top:e,behavior:o?"smooth":"auto"})}},[b,x,c]),g=(0,o.useCallback)(()=>{y(t.length-1)},[y,t.length]);return(0,o.useEffect)(()=>{v(e=>{let n={...e},l={...x},i=!1;return t.forEach((e,t)=>{let s=e.backend_uuid;if(n[t]&&n[t].current)l[s]=n[t];else{let e=o.createRef();n[t]=e,l[s]=e,i=!0}}),Object.keys(n).forEach(e=>{t.some((t,n)=>n===Number(e))||(delete n[Number(e)],i=!0)}),i&&w(l),i?n:e})},[t.length,x,k]),(0,o.useEffect)(()=>{if(t.length<=1||!m)return;let e=window.location.hash;if(e&&!n&&p.current){try{let t=e.slice(1);t.length>3?y(t,!1):y(Number(t),!1)}catch(e){console.error(e)}return}i&&y(t.length-1)},[n,i,f,t.length,b,x,m,y]),(0,o.useEffect)(()=>{let e=s()(()=>{var e;let n=null===(e=b[t.length-1])||void 0===e?void 0:e.current;if(n){let e=n.getBoundingClientRect().top+window.scrollY-100,t=document.body.scrollHeight>window.innerHeight,o=window.innerHeight+window.scrollY>=document.body.scrollHeight-10;if(window.scrollY>=e||!t||o)r&&h(!0),d(!1);else{if(u)return;d(!0)}}},200);return e(),window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e),e.cancel()}},[b,r,u,t.length]),{refs:b,scrollToLatestItem:g,scrollToListItem:y,showScrollButton:r&&!u,hasScrolled:u,setHasScrolled:h}}}}]);